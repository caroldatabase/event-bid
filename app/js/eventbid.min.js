var app=angular.module("eventBid",["ngRoute","ui.bootstrap","ngCookies"]);app.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"app/views/dashBoard.html",controller:"dashBoardController"}).when("/how-it-works",{templateUrl:"app/views/how-it-works.html",controller:"howItWorksCtrl"}).when("/add-category",{templateUrl:"app/views/request-a-category.html",controller:"requestCategoryCtrl"}).when("/browse-tasks",{templateUrl:"app/views/browseTasks.html",controller:"browseTaskCtrl"}).when("/browse-tasks/:categoryName?/:categoryId?",{templateUrl:"app/views/browseTasks.html",controller:"browseTaskCtrl"}).when("/EBManager",{templateUrl:"app/views/EBManager.html",controller:"EBManagerCtrl"}).when("/EBManager/:contactUs?",{templateUrl:"app/views/EBManager.html",controller:"EBManagerCtrl"}).when("/Rewards",{templateUrl:"app/views/Rewards.html",controller:"rewardsCtrl"}).when("/post-task",{templateUrl:"app/views/post-task.html",controller:"postTaskController"}).when("/about-us",{templateUrl:"app/views/sitemap/about-us.html",controller:"aboutusController"}).when("/terms-and-conditions",{templateUrl:"app/views/sitemap/terms-and-conditions.html",controller:"aboutusController"}).when("/privacy-policy",{templateUrl:"app/views/sitemap/privacy-policy.html",controller:"aboutusController"}).when("/settings",{templateUrl:"app/views/settings.html",controller:"settingsCtrl",resolve:{}}).when("/blogs",{templateUrl:"app/views/blogDetail.html",controller:"blogDetailCtrl"}).when("/contact-us",{templateUrl:"app/views/contact-us.html",controller:"contactUsCtrl"}).when("/profile",{templateUrl:"app/views/profile-page.html",controller:"profileController"}).when("/profile/:userId?",{templateUrl:"app/views/profile-page.html",controller:"profileController"}).when("/admin",{templateUrl:"app/views/admin.html",controller:"adminCtrl"}).when("/admin/:payments?",{templateUrl:"app/views/admin.html",controller:"adminCtrl"}).when("/my-dashboard",{templateUrl:"app/views/businessDashboard.html",controller:"buisnessDashboardCtrl"}).when("/change-password",{templateUrl:"app/views/changePassword.html",controller:"changePasswordCtrl"}).when("/message",{templateUrl:"app/views/messaging.html",controller:"messagingCtrl"}).when("/blog-detail/:blogTitle?",{templateUrl:"app/views/addBlogDetail2.html",controller:"blogDetailCtrl"}).when("/payment",{templateUrl:"app/views/payment.html",controller:"paymentCtrl"}).otherwise({redirect:"/"}),t.hashPrefix("")}]),app.config(["$httpProvider",function(e){e.defaults.headers.common={},e.defaults.headers.post={},e.defaults.headers.put={},e.defaults.headers.patch={}}]),app.run(["$rootScope","$location",function(e,t){e.$on("$routeChangeStart",function(a,o,r){"app/views/settings.html"!=o.templateUrl&&"app/views/businessDashboard.html"!=o.templateUrl&&"app/views/customerDashboard.html"!=o.templateUrl&&"app/views/post-task.html"!=o.templateUrl||0==e.isLogin&&($("#promptLoginPopup").modal("show"),t.path("/"))})}]),app.controller("FAQCtrl",["commonService",function(e){e.scrollToTop()}]),app.filter("unique",function(){return function(e,t){if(!1===t)return e;if((t||angular.isUndefined(t))&&angular.isArray(e)){var a=[],o=function(e){return angular.isObject(e)&&angular.isString(t)?e[t]:e};angular.forEach(e,function(e){for(var t=!1,r=0;r<a.length;r++)if(angular.equals(o(a[r]),o(e))){t=!0;break}t||a.push(e)}),e=a}return e}}),app.filter("timeago",function(){return function(e,t,a){if(!e)return"never";if(t||(t=Date.now()),angular.isDate(e)?e=e.getTime():"string"==typeof e&&(e=new Date(e).getTime()),angular.isDate(t)?t=t.getTime():"string"==typeof t&&(t=new Date(t).getTime()),"number"==typeof e&&"number"==typeof t){var o=Math.abs((t-e)/1e3),r=[],i=604800,s=31556926,n=315569260;return(r=o<=60?["",a?"now":"less than a minute"]:o<3600?[Math.round(Math.abs(o/60)),"min"]:o<86400?[Math.round(Math.abs(o/3600)),"hr"]:o<604800?[Math.round(Math.abs(o/86400)),"day"]:o<52*i?[Math.round(Math.abs(o/i)),"week"]:o<10*s?[Math.round(Math.abs(o/s)),"year"]:o<100*n?[Math.round(Math.abs(o/n)),"decade"]:["","a long time"])[1]+=0===r[0]||r[0]>1?"s":"",r=r.join(" "),!0===a?r:e<=t?r+" ago":"in "+r}}}),app.constant("CONSTANTS",{ENVIORNMENT:{WEBUAT:"http://139.59.63.136/eventbid",LOCAL:"http://localhost/eventBid_webapi",PRODUCTION:"http://api.eventbid.com.au"},ERRORMESSAGE:{REQUIREDFIELDERROR:"Please enter required details"},CATEGORY:{Catering:"Catering",Cleaning:"Cleaning",Patisserie:"Patisserie",Waiting_Staff:"Waiting Staff",Graphic_Design:"Graphic Design",Supply_Hire:"Supply Hire",Hair_and_Beauty:"Hair and Beauty",Entertainment_and_talent:"Entertainment and talent",Car_and_Venue_Hire:"Car and Venue Hire",Floristry:"Floristry",Photography_Videography:"Photography and Videography"},CATEGORY_QUESTIONS:{Catering:{cateringType:"Catering Type",mealType:"Meal Type",drinkType:"Drink type served to guests",menuRequests:"Menu Request",waitingRequire:"Waiting Service required",dietaryRequirement:"Dietary requirement",totalGuest:"Total Guests",totalCost:"Cost(in $)",costType:"Type of Cost"},Cleaning:{cleanersNeeded:"Number of cleaners needed",cleaningChecklist:"Cleaning type",equipmentRequired:"Equipments required for cleaning",timeRequired:"Time Required(in hrs)",waitingRequire:"Waiting Service required",totalCost:"Cost(in $)",costType:"Type of Cost"},Patisserie:{cakeTypes:"Type of cakes required",describeReq:"Description of requirement",desertType:"Type of desert",dietaryRequirement:"Dietary requirement",numberOfDesert:"number of desert",costType:"Type of cost",totalCost:"Total Cost",desertImages:"Desert Images for reference"},Waiting_Staff:{dressCode:"Dress code required for waiters",dressCodeDescription:"Dress code description",totalCost:"Total cost",totalCostType:"Total cost type ",totalWaiter:"Total waiters",waitersTask:"Waiters Task",is_bartender_req:"Is bartenders required for alcoholic service",bartender_count:"Number of bartender required"},Graphic_Design:{totalBudgetForbanners:"Total budget for banners",numberOfBanners:"Number of banners",additionalInformation:"Additional Information required",designPrinted:"Design printed",graphicBanners:"Graphic banners required",graphicImages:"Graphic images"},Supply_Hire:{decriptionInDetail:"Description for supplies",returnSupplies:"Return description for supplies",IscleaningPriceToBeIncluded:"Is cleaning price to be included",supplyTypes:"Type of supplies"},Hair_and_Beauty:{hairStyleRequired:"Hair style required",location:"Location",makeUpTypeRequired:"Make type required",needToBring:"Do products need to bring",specialRequestsForHairStyle:"Special request for hair style",specialRequirement:"Special requirement",serviceType:"Type of service",hairType:"Hair type",graphicImages:"graphic images"},Entertainment_and_talent:{entertainerRequired:"Entertainer required",equipmentReadyForTalent:"Equipment reqdy for talent",thingsRequiredForTalent:"Things required for talent"},Car_and_Venue_Hire:{carType:"Type of car",hireType:"Type of hire",totalCars:"Total Number of cars",totalCost:"Total Cost",totalCostType:"Total cost type",totalGuest:"Total guest",venueCleaning:"Venue Cleaning",venueType:"Venue Type"},Floristry:{arrangementPresentation:"Arrangement for presentation",costType:"Type of cost",flowersRequiredDescription:"Description for flowers required",specialRequestDesc:"Special request for description",totalCost:"Total cost"},Photography_Videography:{eventRequirement:"Events required",totalPhotographerRequired:"Total photographers required",additionalComments:"Additional comments for photographers",placesRequiredForPhotographers:"Places required for photographers",servicesRequired:"Services required from photographers",totalGuest:"Total guest to be covered",servicesRequiredVideographer:"Service required from videographer",totalvideographerRequired:"Total videographers required",totalGuestVideography:"Total guest to be covered",placesRequiredForVideographer:"Places required for videographers",additionalCommentsVideographer:"Additional comments for videographers"}}}),app.factory("commonService",["$location","$window","$cookies","$route","$rootScope","$filter","httpService",function(e,t,a,o,r,i,s){function n(e,t){"FirstName"==e&&a.put("FirstName",t),"UserID"==e&&a.put("UserID",t),"UserType"==e&&a.put("UserType",t),"paykey"==e&&a.put("paykey",t)}return{updateLocationPath:function(t){e.path(t)},scrollToTop:function(){t.scrollTo(0,0)},setCookieValues:n,reloadRoute:function(){o.reload()},deleteCookieValues:function(e){"FirstName"==e&&a.remove("FirstName");"UserID"==e&&a.remove("UserID");"Photo"==e&&a.remove("Photo");"UserType"==e&&a.remove("UserType");"paykey"==e&&a.remove("paykey")},checkUserLoggedIn:function(){var e=a.get("UserID");e?(r.isLogin=!0,r.userID=e,r.firstName=a.get("FirstName"),r.UserType=a.get("UserType")):r.isLogin=!1},getUserid:function(){return a.get("UserID")},getCategoryMapping:function(e){for(var t={},a=0;a<e.length;a++){var o=i("uppercase")(e[a].name);t[o.replace(/\ /gi,"_")]=e[a].id}return t}}}]),app.factory("httpService",["$http","CONSTANTS",function(e,t){var a=t.ENVIORNMENT.PRODUCTION+"/";function o(t){return e.get(a+"api/v1/user/deactivate"+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})}function o(t){return e.get(a+"api/v1/user/deactivate/"+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})}return{createAccount:function(t){return e.post(a+"api/v1/user/signup",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},login:function(t){return e.post(a+"api/v1/user/login",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},resetPassword:function(t){return e.post(a+"api/login/resetPassword/",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},forgetPassword:function(t){return console.log(a+"api/v1/user/forget-password?email="+t),e.post(a+"api/v1/user/forget-password?email="+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},addCategory:function(t){return e.post(a+"api/v1/post-task/category",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getCategory:function(){return e.get(a+"api/v1/post-task/getcategory",{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},postTask:function(t){return e.post(a+"api/v1/post-task/create",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},contactus:function(t){return e.post(a+"api/v1/user/contactus",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},newEBCategory:function(t){return e.post(a+"api/v1/newEBCategory/create",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},deleteCategory:function(t){return e.get(a+"api/v1/category/delete/"+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},browseAllTask:function(t){return e.get(a+"api/v1/post-task/getPostTask?task_status=open&page_num="+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},deleteTask:function(t){return e.get(a+"api/v1/post-task/delete/"+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getAllBlogs:function(){return e.get(a+"api/v1/getEventbidHub",{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},createBlog:function(){return e.get(a+"api/v1/blog/create",{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},deleteBlog:function(t){return e.get(a+"api/v1/blog/delete/"+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},addBlog:function(t){return e.post(a+"api/v1/blog/create",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},showInterest:function(t){return e.post(a+"api/v1/showInterestList",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getBuisnessTask:function(t){return e.get(a+"api/v1/bussinessDashboard/"+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getInterestedUsersList:function(t){return e.get(a+"api/v1/interestUsersList/"+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},assignUser:function(t){return e.post(a+"api/v1/assignTask",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},browseTaskByCategory:function(t,o){return e.get(a+"api/v1/post-task/getPostTask?task_status=open&page_num="+o+"&category_id="+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getUserDetails:function(t){return e.get(a+"/api/v1/user/details/"+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},updateProfile:function(t,o){return e.post(a+"api/v1/user/update-profile/"+t,o,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},contactEBManager:function(t){return e.post(a+"api/v1/EBManagerContactEnquiry",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},updateTask:function(t,o){return e.post(a+"api/v1/post-task/update/"+t,o,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getCustomerTask:function(t){return e.get(a+"api/v1/customerBusinessTask/"+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},changePassword:function(t,o,r){return e.post(a+"api/v1/user/changePassword/"+t+"?newPassword="+r+"&oldPassword="+o,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getRecommendationTask:function(t){return e.get(a+"api/v1/getRecommendTask/"+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},postComment:function(t){return e.post(a+"api/v1/comment/post",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getAllComment:function(t){return e.get(a+"api/v1/comment/post?getCommentBy=task&taskId="+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},replyComment:function(t){return e.post(a+"api/v1/comment/post?commentReply=yes",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},makePayment:function(t){return e.post(a+"api/v1/makePayment?saveCard=yes",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},addCard:function(t){return e.post(a+"api/v1/addCard",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},updateCard:function(t){return e.post(a+"api/v1/updateCard",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getCardDetails:function(t){return e.post(a+"api/v1/getCard",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},deleteCardDetails:function(t){return e.post(a+"api/v1/deleteCard",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},paymentByCard:function(t){return e.post(a+"api/v1/paymentByCard",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getQualification:function(t,o){return e.get(a+"api/v1/blog/getQualification?page_num="+t+"&page_size="+o,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getInsurance:function(t,o){return e.get(a+"api/v1/blog/getInsurance?page_num="+t+"&page_size="+o,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},approveQualification:function(t,o){return e.post(a+"api/v1/approveQualification/"+t,o,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getInsuranceDetailsForAdmin:function(){return e.get(a+"api/v1/getInsurance?page_num=1&page_size=10",{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},approveInsurance:function(t,o){return e.post(a+"api/v1/approveInsurance/"+t,o,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getPersonalMessage:function(t){return e.post(a+"api/v1/getPersonalMessage",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},addPersonalMessage:function(t){return e.post(a+"api/v1/addPersonalMessage",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},deactivate:o,addInsurance:function(t){return e.post(a+"api/v1/addInsurance",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},addQualification:function(t){return e.post(a+"api/v1/addQualification",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getTransaction:function(t){return e.post(a+"api/v1/getTransaction/"+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getMessageOnDashBoard:function(t){return e.get(a+"api/v1/getMessageOnDashBoard?userId="+t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},allUserDetails:function(){return e.get(a+"api/v1/allUserDetails",{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},deactivate:o,paypal:function(t){return e.post("http://api.eventbid.com.au/api/v1/paypalPayKey",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getCompletedTaskList:function(){return e.get(a+"api/v1/getCompletedTasktist",{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},getQualifications:function(){return e.get(a+"api/v1/getQualification?page_num=1&page_size=10",{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},sendPaykey:function(t){return e.post("http://api.eventbid.com.au/api/v1/getPaymentStatus",t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},approvePaymentFromAdminMerchant:function(t,a){return e.post("http://api.eventbid.com.au/api/v1/approvePaymentFromAdminMerchant/"+a,t,{headers:{"Content-Type":"application/json"}}).then(function(e){return e})}}}]),app.directive("fileread",["$rootScope",function(e){return{scope:{fileread:"="},link:function(t,a,o){a.bind("change",function(a){var r=new FileReader;r.onload=function(a){t.$apply(function(){t.fileread=a.target.result,e.$broadcast("imageAdded",t.fileread,o.imageType)})},r.readAsDataURL(a.target.files[0])})}}}]),app.controller("dashBoardController",["$scope","commonService","$rootScope","httpService",function(e,t,a,o){function r(){a.loaderIndicator=!0,a.categoryList?a.loaderIndicator=!1:o.getCategory().then(function(e){a.categoryList=e.data.data,a.loaderIndicator=!1})}t.scrollToTop(),$(document).ready(function(){$(".owl-carousel.home-banner").owlCarousel({items:1,animateOut:"fadeOut",loop:!0,margin:0,responsive:!0,nav:!1,autoplay:!0,autoPlaySpeed:3e3,autoPlayTimeout:3e3,autoplayHoverPause:!0}),$(".owl-carousel").owlCarousel({loop:!0,margin:10,responsiveClass:!0,responsive:{0:{items:1,nav:!0},600:{items:3,nav:!1},1e3:{items:4,nav:!0,loop:!1,margin:20}}})}),a.loaderIndicator=!0,a.blogList?a.loaderIndicator=!1:o.getAllBlogs().then(function(e){a.blogList=e.data.data,a.loaderIndicator=!1}),r(),t.checkUserLoggedIn(),e.postTask=function(){a.isLogin?t.updateLocationPath("/post-task"):$("#promptLoginPopup").modal("show")},e.promptModalClose=function(){$("#promptLoginPopup").modal("toggle")},e.seeMoreClick=function(){t.updateLocationPath("/categories")},e.requestCategoryClick=function(){t.updateLocationPath("/add-category")},e.getAllCategoryFilters=r,e.openBlogDetailPopup=function(t){$("#blogDetailPopup").modal("toggle"),$("#blogDetailPopup").modal({backdrop:"static"}),$("#blogDetailPopup").modal("show"),e.item=t},e.sucessPostTaskPopupClose=function(){$("#sucessPostTaskPopup").modal("toggle")},e.sucessShowInterestPopupClose=function(){$("#sucessShowInterestPopup").modal("toggle")}}]),app.controller("loginController",["$scope","httpService","commonService","CONSTANTS","$rootScope",function(e,t,a,o,r){e.createAccount=function(){e.user.password===e.user.cnfrmPass?(e.passwordIndicator=!1,e.signUpForm.$setSubmitted(!0),e.signUpForm.$valid?(r.loaderIndicator=!0,t.createAccount(e.user).then(function(t){if(500!=t.data.code||"Registration successfully done."==t.data.message){r.loaderIndicator=!1,e.user={};var o=t.data.data;a.setCookieValues("FirstName",o.first_name),a.setCookieValues("UserID",o.id),a.setCookieValues("UserType",o.user_type),r.isLogin=!0,r.UserType=o.user_type,r.firstName=o.first_name,a.reloadRoute(),$("#signUpPopup").modal("toggle"),1==r.postTaskClicked&&a.updateLocationPath("/post-task")}else"The email has already been taken."==t.data.message&&(r.loaderIndicator=!1,e.errorIndicator=!0,e.message="Account with this emailid already exists. Please try with different emailid. ")})):(e.message=o.ERRORMESSAGE.REQUIREDFIELDERROR,e.errorIndicator=!0)):(e.message="password and confirm password are not same.",e.errorIndicator=!0,e.passwordIndicator=!0)},e.fbLogin=function(){FB.login(function(e){e.authResponse?(console.log("Authentication with facebook is successful."),FB.api("/me?fields=id,email,first_name,last_name",function(e){console.log("Good to see you, "+e.name+".")})):console.log("User cancelled login or did not fully authorize.")})},e.login=function(){e.loginForm.$setSubmitted(!0),e.loginForm.$valid?(r.loaderIndicator=!0,t.login(e.user).then(function(o){if("Successfully logged in."==o.data.message){"admin@eventbid.com"==e.user.email&&"admin123$"==e.user.password&&(r.adminIndicator=!0),e.user={};var i=o.data.data;a.setCookieValues("FirstName",i.firstName),a.setCookieValues("UserID",i.userId),r.isLogin=!0,r.firstName=i.firstName,a.setCookieValues("UserType",i.userType),r.UserType=i.userType,t.getUserDetails(i.userId).then(function(e){if("Record found successfully."==e.data.message){var t=e.data.data;r.photo=t.photo,r.loaderIndicator=!1,a.setCookieValues("Photo",r.photo)}}),$("#loginPopup").modal("toggle"),1==r.postTaskClicked&&a.updateLocationPath("/post-task")}else r.loaderIndicator=!1,e.message="email or password is wrong.Please enter correct details.",e.errorMessageIndicator=!0,r.loaderIndicator=!1})):(e.message=o.ERRORMESSAGE.REQUIREDFIELDERROR,e.errorMessageIndicator=!0)},e.resetPassword=function(){t.login(e.user).then(function(){alert("reset succeded")})},e.selectCategories=function(){e.user.category_id.length<=3&&(e.user.category_id=e.user.category_id)},e.userTypeClicked=function(){e.errorIndicator=!1,e.userTypeIndicator=!1,e.signUpForm.$submitted=!1,setTimeout(function(){$("#selectedCategories").multiselect()},1e3),"taskSeeker"===e.user.userType?e.categoriesIndicator=!0:e.categoriesIndicator=!1},e.EmailLogin=function(){e.user&&!e.user.userType?(e.signUpForm.userType.$invalid=!0,e.errorIndicator=!0,e.message="Please select user type.",e.userTypeIndicator=!0):(e.SignUpIndicator=!0,"taskSeeker"===e.user.userType&&(e.categoriesIndicator=!0,setTimeout(function(){$("#selectedCategories").multiselect()},0)))},e.checkEmail=function(t){t.$error.pattern?e.emailIndicator=!0:e.emailIndicator=!1},e.logout=function(){a.deleteCookieValues("FirstName"),a.deleteCookieValues("UserID"),a.deleteCookieValues("UserType"),a.deleteCookieValues("Photo"),r.isLogin=!1,r.adminIndicator=!1,a.reloadRoute()},$("#signUpPopup").on("hidden.bs.modal",function(){e.user={},e.errorIndicator=!1,e.SignUpIndicator=!1}),$("#loginPopup").on("hidden.bs.modal",function(){e.user={},e.errorMessageIndicator=!1,e.emailIndicator=!1}),setTimeout(function(){$(".multipleSelection").select2({maximumSelectionLength:4})},0),t.getCategory().then(function(t){r.categoryList=e.categoryList=t.data.data}),e.SignUpIndicator=!1,e.user={},e.emailFormat=/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/,e.errorIndicator=!1,r.loaderIndicator=!1,e.passwordIndicator=!1,e.openSignupModal=function(){e.user={},$("#signUpPopup").modal("toggle"),$("#signUpPopup").modal({backdrop:"static"}),$("#signUpPopup").modal("show")},e.openLoginModal=function(){$("#loginPopup").modal("toggle"),$("#loginPopup").modal({backdrop:"static"}),$("#loginPopup").modal("show"),e.user={}}}]),app.controller("ForgetPassController",["$scope","httpService",function(e,t){e.forgetPassword=function(){e.forgotPassForm.$setSubmitted(!0),e.forgotPassForm.$valid?t.forgetPassword(e.emailID).then(function(t){e.successMessage="Reset password link has sent. Please check your email.",e.successIndicator=!0}):(e.emailErrorIndicator=!0,e.message="Please enter email address")},e.checkEmail=function(){e.forgotPassForm.$error.email?(e.emailErrorIndicator=!0,e.message="Please enter valid email address."):e.emailErrorIndicator=!1},e.user={},e.successIndicator=!1}]),app.controller("postTaskController",["$scope","commonService","httpService","CONSTANTS","$rootScope","$compile",function(e,t,a,o,r,i){function s(){e.task={},e.task.inspirationPhoto=[],e.task.timeFrom="11:00 A.M",e.task.timeTo="11:00 A.M",e.postTaskForm&&(e.postTaskForm.$setPristine(),e.postTaskForm.$setUntouched(),e.postTaskForm.$submitted=!1)}$(".singleSelection").select2(),$(".multipleSelection").select2({}),r.loaderIndicator=!0,t.scrollToTop(),$(document).ready(function(){var e=new Date;$(".singleSelection").select2(),$(".multipleSelection").select2({maximumSelectionLength:3}),$(".datepicker").datetimepicker({pickDate:!0,pickTime:!1,format:"DD-MM-YYYY",changeMonth:!0,changeYear:!0,minDate:e}).on("dp.change",function(){$(this).trigger("blur")}),$(".timepicker").timepicker({timeFormat:"h:mm p",interval:30,minTime:"07",maxTime:"11:30pm",defaultTime:"11",startTime:"07:00",dynamic:!1,dropdown:!0,scrollbar:!0})}),a.getCategory().then(function(a){r.categoryList=e.categoryList=a.data.data,e.categoryConst=t.getCategoryMapping(e.categoryList),r.loaderIndicator=!1}),s(),e.postTask=function(){e.task.timeFrom=$("#timeFrom").val(),e.task.timeTo=$("#timeTo").val(),e.postTaskForm.$setSubmitted(!0),e.postTaskForm.$valid?(r.loaderIndicator=!0,e.task.post_user_id=t.getUserid(),e.task.task_status="open",console.log(JSON.stringify(e.task)),a.postTask(e.task).then(function(a){(a.data.code="Post task created successfully."==a.data.message)?(t.scrollToTop(),s(),r.loaderIndicator=!1,e.successMessageIndicator=!0,e.errorMessageIndicator=!1,e.message="Task submitted successfully.",$("#sucessPostTaskPopup").modal("show"),e.task={}):(r.loaderIndicator=!1,e.errorMessageIndicator=!1,e.message="Error occured. Please try after some time.")})):(e.errorMessageIndicator=!0,e.message="Please enter required fields")},e.categoryChange=function(t){$(".singleSelection").select2(),setTimeout(function(){$(".multipleSelection").select2({})},0),t==e.categoryConst.CAR_VENUE_HIRE?$(".multipleSelection").select2({maximumSelectionLength:3}):t==e.categoryConst.CLEANING?setTimeout(function(){$(".multipleSelection").select2({})},0):t==e.categoryConst.PATISSERIE?(e.task.category_question={},e.task.category_question.desertImages=[],setTimeout(function(){$(".multipleSelection").select2({})},0)):t==e.categoryConst.GRAPHIC_DESIGN&&(e.task.category_question={},e.task.category_question.graphicImages=[],setTimeout(function(){$(".multipleSelection").select2({})},0))},e.selectHireType=function(){e.carIndicator=!1,e.venueIndicator=!1,angular.forEach(e.task.category_question.hireType,function(t,a){"Car Hire"==t&&(e.carIndicator=!0),"Venue Hire"==t&&(e.venueIndicator=!0)})},e.changeServiceType=function(t){e.hairIndicator=!1,e.makeUpIndicator=!1,e.otherBeautyServicesIndicator=!1,angular.forEach(e.task.category_question.serviceType,function(t,a){"Hair"==t&&(e.hairIndicator=!0),"Make up"==t&&(e.makeUpIndicator=!0),"Other beauty service"==t&&(e.otherBeautyServicesIndicator=!0),$(".singleSelection").select2(),setTimeout(function(){$(".multipleSelection").select2({})},0)})},e.photoVideoEventRequired=function(){e.PhotographyIndicator=!1,e.VideographyIndicator=!1,angular.forEach(e.task.category_question.eventRequirement,function(t,a){"Photography"==t&&(e.PhotographyIndicator=!0),"Videography"==t&&(e.VideographyIndicator=!0)})},r.$on("imageAdded",function(a,o,r){o&&("categoryImage"==r&&e.task.inspirationPhoto&&(e.task.inspirationPhoto.length<3?(e.task.inspirationPhoto.push(o),setTimeout(function(){$("#categoryImage").val("")},2e3)):(e.errorMessageIndicator=!0,e.message="Only three images are allowed for uploading.",t.scrollToTop())),"desertImage"==r&&e.task.category_question.desertImages&&(e.task.category_question.desertImages.length<3?(e.task.category_question.desertImages.push(o),setTimeout(function(){$("#desertImage").val("")},2e3)):(e.errorMessageIndicator=!0,e.message="Only three images are allowed for uploading.",t.scrollToTop())),"graphicImage"==r&&e.task.category_question.graphicImages&&(e.task.category_question.graphicImages.length<3?(e.task.category_question.graphicImages.push(o),setTimeout(function(){$("#graphicImage").val("")},2e3)):(e.errorMessageIndicator=!0,e.message="Only three images are allowed for uploading.",t.scrollToTop())),"makeuplookImage"==r&&(e.task.category_question.makeuplookImages.length<3?(e.task.category_question.makeuplookImages.push(o),setTimeout(function(){$("#makeuplookImage").val("")},2e3)):(e.errorMessageIndicator=!0,e.message="Only three images are allowed for uploading.",t.scrollToTop())),"hairStyleImage"==r&&(e.task.category_question.hairStyleImages.length<3?(e.task.category_question.hairStyleImages.push(o),setTimeout(function(){$("#hairStyleImage").val("")},2e3)):(e.errorMessageIndicator=!0,e.message="Only three images are allowed for uploading.",t.scrollToTop())))})}]),app.controller("aboutusController",["commonService","$scope",function(e,t){e.scrollToTop(),t.openSignupModal=function(){$("#signUpPopup").modal("toggle")}}]),app.controller("profileController",["$scope","commonService","$rootScope","httpService","CONSTANTS","$routeParams","$route",function(e,t,a,o,r,i,s){function n(t){o.getCustomerTask(t).then(function(r){var i;console.log(r),i=t,a.loaderIndicator=!0,o.getBuisnessTask(i).then(function(t){console.log(t),200==t.data.code?(a.loaderIndicator=!1,e.openTask=[],e.progressTask=[],t.data.data.completed&&(e.jobsInProgressIndicator=!0,a.loaderIndicator=!1,$.merge(e.completedTaskCustomer,t.data.data.completed))):404==t.data.code&&(a.loaderIndicator=!1,e.potentialJobsIndicator=!1,e.jobsInProgressIndicator=!1,e.openTask=[])}),200==r.data.code?(e.openTaskCustomer=[],e.progressTaskCustomer=[],e.completedTaskCustomer=[],a.loaderIndicator=!1,r.data.data.completed&&(a.loaderIndicator=!1,e.completedTaskCustomer=r.data.data.completed)):404==r.data.code&&(a.loaderIndicator=!1,e.openTaskCustomer=[])})}!function(){a.loaderIndicator=!0,t.checkUserLoggedIn();var r=t.getUserid();e.isEdit=!0;var s=i.userId;s?o.getUserDetails(s).then(function(t){e.user=t.data.data;var a=e.user.verification_skills,o=JSON.parse("["+a+"]");e.skillList=o[0],e.isEdit=!1}):o.getUserDetails(r).then(function(t){e.user=t.data.data;var a=e.user.verification_skills,o=JSON.parse("["+a+"]");e.skillList=o[0],n(s),n(r)})}(),e.openSelectedtaskInDetail=function(t){$("#OpenTaskModal").modal("toggle"),$("#OpenTaskModal").modal({backdrop:"static"}),$("#OpenTaskModal").modal("show"),e.taskDetail={},e.taskDetail=t,e.taskDetail.category_Detail={},e.taskDetail.category_question=angular.fromJson(t.category_question),function(){switch(e.taskDetail.category.name){case r.CATEGORY.Catering:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.cateringType]=e.taskDetail.category_question.cateringType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.mealType]=e.taskDetail.category_question.mealType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.drinkType]=e.taskDetail.category_question.drinkType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.menuRequests]=e.taskDetail.category_question.menuRequests,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.waitingRequire]=e.taskDetail.category_question.waitingRequire,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.dietaryRequirement]=e.taskDetail.category_question.dietaryRequirement,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.totalGuest]=e.taskDetail.category_question.totalGuest,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.costType]=e.taskDetail.category_question.costType;break;case r.CATEGORY.Cleaning:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.cleanersNeeded]=e.taskDetail.category_question.cleanersNeeded,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.cleaningChecklist]=e.taskDetail.category_question.cleaningChecklist,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.equipmentRequired]=e.taskDetail.category_question.equipmentRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.timeRequired]=e.taskDetail.category_question.timeRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.costType]=e.taskDetail.category_question.costType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.cleaningChecklist]=e.taskDetail.category_question.cleaningChecklist.join([separator=","]);break;case r.CATEGORY.Patisserie:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.cakeTypes]=e.taskDetail.category_question.cakeTypes.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.describeReq]=e.taskDetail.category_question.describeReq,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.desertType]=e.taskDetail.category_question.desertType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.dietaryRequirement]=e.taskDetail.category_question.dietaryRequirement,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.numberOfDesert]=e.taskDetail.category_question.numberOfDesert,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.costType]=e.taskDetail.category_question.costType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.desertImages]=e.taskDetail.category_question.desertImages;break;case r.CATEGORY.Waiting_Staff:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.dressCode]=e.taskDetail.category_question.dressCode,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.dressCodeDescription]=e.taskDetail.category_question.dressCodeDescription,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.totalCostType]=e.taskDetail.category_question.totalCostType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.totalWaiter]=e.taskDetail.category_question.totalWaiter,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.waitersTask]=e.taskDetail.category_question.waitersTask;break;case r.CATEGORY.Graphic_Design:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.totalBudgetForbanners]=e.taskDetail.category_question.totalBudgetForbanners,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.numberOfBanners]=e.taskDetail.category_question.numberOfBanners,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.designPrinted]=e.taskDetail.category_question.designPrinted,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.additionalInformation]=e.taskDetail.category_question.additionalInformation,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.graphicBanners]=e.taskDetail.category_question.graphicBanners.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.graphicImages]=e.taskDetail.category_question.graphicImages;break;case r.CATEGORY.Supply_Hire:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.decriptionInDetail]=e.taskDetail.category_question.decriptionInDetail,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.returnSupplies]=e.taskDetail.category_question.returnSupplies,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.IscleaningPriceToBeIncluded]=e.taskDetail.category_question.IscleaningPriceToBeIncluded,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.supplyTypes]=e.taskDetail.category_question.supplyTypes.join([separator=","]);break;case r.CATEGORY.Hair_and_Beauty:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.hairStyleRequired]=e.taskDetail.category_question.hairStyleRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.location]=e.taskDetail.category_question.location,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.makeUpTypeRequired]=e.taskDetail.category_question.makeUpTypeRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.needToBring]=e.taskDetail.category_question.needToBring,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.specialRequestsForHairStyle]=e.taskDetail.category_question.specialRequestsForHairStyle,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.specialRequirement]=e.taskDetail.category_question.specialRequirement,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.serviceType]=e.taskDetail.category_question.serviceType.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.hairType]=e.taskDetail.category_question.hairType.join([separator=","]);break;case r.CATEGORY.Entertainment_and_talent:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Entertainment_and_talent.entertainerRequired]=e.taskDetail.category_question.entertainerRequired.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Entertainment_and_talent.equipmentReadyForTalent]=e.taskDetail.category_question.equipmentReadyForTalent,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Entertainment_and_talent.thingsRequiredForTalent]=e.taskDetail.category_question.thingsRequiredForTalent;break;case r.CATEGORY.Car_and_Venue_Hire:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.carType]=e.taskDetail.category_question.carType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.hireType]=e.taskDetail.category_question.hireType.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalCars]=e.taskDetail.category_question.totalCars,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalCostType]=e.taskDetail.category_question.totalCostType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalGuest]=e.taskDetail.category_question.totalGuest,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.venueCleaning]=e.taskDetail.category_question.venueCleaning,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.venueType]=e.taskDetail.category_question.venueType;break;case r.CATEGORY.Floristry:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.arrangementPresentation]=e.taskDetail.category_question.arrangementPresentation,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.costType]=e.taskDetail.category_question.costType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.flowersRequiredDescription]=e.taskDetail.category_question.flowersRequiredDescription,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.specialRequestDesc]=e.taskDetail.category_question.specialRequestDesc,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.totalCost]=e.taskDetail.category_question.totalCost;break;case r.CATEGORY.Photography_Videography:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.eventRequirement]=e.taskDetail.category_question.eventRequirement.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalPhotographerRequired]=e.taskDetail.category_question.totalPhotographerRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.additionalComments]=e.taskDetail.category_question.additionalComments,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.placesRequiredForPhotographers]=e.taskDetail.category_question.placesRequiredForPhotographers,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.servicesRequired]=e.taskDetail.category_question.servicesRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalGuest]=e.taskDetail.category_question.totalGuest,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.servicesRequiredVideographer]=e.taskDetail.category_question.servicesRequiredVideographer,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalvideographerRequired]=e.taskDetail.category_question.totalvideographerRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalGuestVideography]=e.taskDetail.category_question.totalGuestVideography,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.placesRequiredForVideographer]=e.taskDetail.category_question.placesRequiredForVideographer,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.additionalCommentsVideographer]=e.taskDetail.category_question.additionalCommentsVideographer}}()}}]),app.directive("eventMenu",function(){return{templateUrl:"app/directives/eventMenu/headerNavigation.html"}}),app.controller("updateProfile",["$scope",function(e){e.updateProfile=function(){e.updateProfileForm.$setSubmitted(!0),e.updateProfileForm.$valid?(e.successMessageIndicator=!0,e.message="Profile updated successfully.",e.errorMessageIndicator=!1):(e.errorMessageIndicator=!0,e.successMessageIndicator=!1,e.message="Please fill required details")}}]),app.controller("addCategoryController",["$scope","httpService","$rootScope",function(e,t,a){e.addNewCategory=function(){e.addCategoryForm.$setSubmitted(!0),e.addCategoryForm.$valid?(a.loaderIndicator=!0,t.addCategory(e.category).then(function(t){"category created successfully."==t.data.message?(a.loaderIndicator=!1,e.successMessageIndicator=!0,e.ErrorIndicator=!1,e.message="Category added successfully.",e.category={},$("#categoryName").val(""),$("#categoryImage").val(""),a.$broadcast("addedCategory",function(){})):"Request URL not available"==t.data.message?(a.loaderIndicator=!1,e.message="Something went wrong. Technical issues.",e.ErrorIndicator=!0):(a.loaderIndicator=!1,e.message="Category name already exists.",e.ErrorIndicator=!0)})):(e.message="Please enter category name.",e.ErrorIndicator=!0,e.successMessageIndicator=!1)},e.ModalClose=function(){e.category={},e.ErrorIndicator=!1,e.successMessageIndicator=!1,angular.element("#categoryName").removeClass("error")},e.category={}}]),app.controller("EBManagerCtrl",["$scope","commonService","$rootScope","httpService","$routeParams",function(e,t,a,o,r){function i(){e.functionIndicator=!1,e.contactusIndicator=!0}e.showContactSettingsTab=i,function(){e.functionIndicator=!0,e.contactusIndicator=!1,e.user={},e.emailFormat=/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/,e.errorMessageIndicator=!1,t.scrollToTop(),$(".datepicker").datetimepicker({pickDate:!0,pickTime:!1,format:"MM-DD-YYYY",changeMonth:!0,changeYear:!0,minDate:new Date}).on("dp.change",function(){$(this).trigger("blur")}),$(".timepicker").timepicker({timeFormat:"h:mm p",interval:30,minTime:"07",maxTime:"11:30pm",defaultTime:"11",startTime:"07:00",dynamic:!1,dropdown:!0,scrollbar:!0}),r.contactUs&&i();setTimeout(function(){$("#selectedCategories").multiselect()},0)}(),e.showFunctionSettingsTab=function(){e.functionIndicator=!0,e.contactusIndicator=!1,$(".datepicker").datetimepicker({pickDate:!0,pickTime:!1,format:"MM-DD-YYYY",changeMonth:!0,changeYear:!0,minDate:new Date}).on("dp.change",function(){$(this).trigger("blur")})},e.countChar=function(){if(e.user.message){var t=e.user.message.length;t>=1e3?e.user.message=e.user.message.substring(0,1e3):$("#charNum").text(1e3-t)}else $("#charNum").text(1e3)},e.contactUs=function(){e.EBContactusForm.$setSubmitted(!0),e.EBContactusForm.$valid?(a.loaderIndicator=!0,o.contactEBManager(e.user).then(function(o){a.loaderIndicator=!1,t.scrollToTop(),e.EBContactusForm.$setPristine(),e.EBContactusForm.$setUntouched(),e.successMessageIndicator=!0,e.errorMessageIndicator=!1,e.message="Enquiry submitted successfully.We will get back to you shortly.",e.user={}})):e.EBContactusForm.$error.required?(e.errorMessageIndicator=!0,e.message="Please enter required fields"):(e.errorMessageIndicator=!0,e.message="Please enter valid email-id.")},e.onSelectCategory=function(){console.log(e.user.selectedCategories)}}]),app.controller("contactUsCtrl",["$scope","commonService","httpService","$rootScope",function(e,t,a,o){e.user={},e.emailFormat=/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/,e.errorMessageIndicator=!1,t.scrollToTop(),e.contactUs=function(){e.contactusForm.$setSubmitted(!0),e.contactusForm.$valid?(o.loaderIndicator=!0,a.contactus(e.user).then(function(a){o.loaderIndicator=!1,t.scrollToTop(),e.contactusForm.$setPristine(),e.contactusForm.$setUntouched(),e.successMessageIndicator=!0,e.errorMessageIndicator=!1,e.message="Enquiry submitted successfully.We will get back to you shortly.",e.user={}})):e.contactusForm.$error.required?(e.errorMessageIndicator=!0,e.message="Please enter required fields"):(e.errorMessageIndicator=!0,e.message="Please enter valid email-id.")},e.countChar=function(){if(e.user.comments){var t=e.user.comments.length;t>=5e3?e.user.comments=e.user.comments.substring(0,5e3):$("#charNum").text(5e3-t)}else $("#charNum").text(5e3)}}]),app.controller("howItWorksCtrl",["$scope","commonService","$rootScope",function(e,t,a){!function(){a.isLogin&&(e.loginIndicator=!0);t.scrollToTop(),$("#collapseOne").hide(),$("#collapseTwo").hide(),$("#collapseThree").hide(),$("#collapseFour").hide()}(),$("#headingOne").click(function(){$("#collapseOne").toggle("1000"),$("#collapseTwo").hide(),$("#collapseThree").hide(),$("#collapseFour").hide(),$("i",this).toggleClass("up down")}),$("#headingTwo").click(function(){$("#collapseTwo").toggle("1000"),$("#collapseOne").hide(),$("#collapseThree").hide(),$("#collapseFour").hide(),$("i",this).toggleClass("up down")}),$("#headingThree").click(function(){$("#collapseThree").toggle("1000"),$("#collapseTwo").hide(),$("#collapseOne").hide(),$("#collapseFour").hide(),$("i",this).toggleClass("up down")}),$("#headingFour").click(function(){$("#collapseFour").toggle("1000"),$("#collapseTwo").hide(),$("#collapseThree").hide(),$("#collapseOne").hide(),$("i",this).toggleClass("up down")}),e.openSignupModal=function(){$("#signUpPopup").modal("toggle")},e.openLoginModal=function(){$("#loginPopup").modal("toggle")}}]),app.controller("rewardsCtrl",["$scope","commonService",function(e,t){t.scrollToTop(),$("#collapseOne").hide(),$("#collapseTwo").hide(),$("#headingOne").click(function(){$("#collapseOne").toggle("1000"),$("#collapseTwo").hide(),$("i",this).toggleClass("up down")}),$("#headingTwo").click(function(){$("#collapseTwo").toggle("1000"),$("#collapseOne").hide(),$("i",this).toggleClass("up down")})}]),app.controller("requestCategoryCtrl",["$scope","$rootScope","commonService","httpService",function(e,t,a,o){a.scrollToTop(),e.reqUser={},e.emailFormat=/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/,e.requestCategory=function(){e.requestCategoryForm.$setSubmitted(!0),e.requestCategoryForm.$valid?(t.loaderIndicator=!0,o.newEBCategory(e.reqUser).then(function(o){t.loaderIndicator=!1,a.scrollToTop(),e.requestCategoryForm.$setPristine(),e.requestCategoryForm.$setUntouched(),e.successMessageIndicator=!0,e.errorMessageIndicator=!1,e.message="Category request submitted successfully.We will get back to you shortly.",e.reqUser={}})):(a.scrollToTop(),e.requestCategoryForm.$error.required?(e.errorMessageIndicator=!0,e.message="Please enter required fields"):e.requestCategoryForm.$error.pattern&&(e.errorMessageIndicator=!0,e.message="Please enter valid email-id."))},e.countChar=function(){if(e.reqUser.whyNeedCategory){var t=e.reqUser.whyNeedCategory.length;t>=5e3?e.reqUser.whyNeedCategory=e.reqUser.whyNeedCategory.substring(0,5e3):$("#charNum").text(5e3-t)}else $("#charNum").text(5e3)}}]),app.controller("adminCtrl",["$scope","commonService","httpService","$rootScope","$location","$window","$routeParams","$cookies",function(e,t,a,o,r,i,s,n){function l(){o.loaderIndicator=!0,a.getCategory().then(function(t){e.categories=t.data.data,o.loaderIndicator=!1})}function c(){o.loaderIndicator=!0,a.browseAllTask().then(function(t){e.taskList=t.data.data,o.loaderIndicator=!1,e.$watch("currentPage + numPerPage",function(){var t=(e.currentPage-1)*e.numPerPage,a=t+e.numPerPage;e.filteredLists=e.taskList.slice(t,a)})})}function d(){o.loaderIndicator=!0,a.getAllBlogs().then(function(t){e.blogList=t.data.data,console.log(e.blogList),o.loaderIndicator=!1})}function u(){o.loaderIndicator=!0,a.getCompletedTaskList().then(function(t){o.loaderIndicator=!1,e.taskList=t.data.data;for(var a=0;a<e.taskList.length;a++)e.taskList[a].category_question=JSON.parse(e.taskList[a].category_question)})}!function(){t.checkUserLoggedIn(),e.categoryIndicator=!1,e.blogIndicator=!1,e.taskIndicator=!1,e.userIndicator=!1,l(),e.currentPage=1,e.numPerPage=5,e.maxSize=5;var i=t.getUserid();if(s.payments){o.loaderIndicator=!0,u(),e.paymentIndicator=!0,e.categoryIndicator=!1,e.blogIndicator=!1,e.taskIndicator=!1,e.userIndicator=!1,e.insuranceIndicator=!1;var c=n.get("paykey");if(c){var d={payKey:c};a.sendPaykey(d).then(function(o){if("Payment status"==o.data.message&&"COMPLETED"==o.data.data.status){t.deleteCookieValues("paykey"),e.transactionId=o.data.data.paymentInfoList.paymentInfo[0].senderTransactionId,$("#OpenTaskModal").modal({backdrop:"static",keyboard:!1},"show");var r={transactionDetails:[o.data.data],isPaymentMade:"true"};a.approvePaymentFromAdminMerchant(r,o.data.taskId).then(function(e){console.log("response",e)})}})}else r.path("/admin")}36!=i&&(t.deleteCookieValues("FirstName"),t.deleteCookieValues("UserID"),t.deleteCookieValues("UserType"),t.deleteCookieValues("Photo"),o.isLogin=!1,o.adminIndicator=!1,t.reloadRoute(),r.path("/"))}(),e.openCategorySection=function(){e.categoryIndicator=!0,e.blogIndicator=!1,e.taskIndicator=!1,e.userIndicator=!1,e.paymentIndicator=!1,e.insuranceIndicator=!1,e.transactionIndicator=!1},e.openInsuranceQualificationSection=function(){e.categoryIndicator=!1,e.blogIndicator=!1,e.taskIndicator=!1,e.userIndicator=!1,e.paymentIndicator=!1,e.insuranceIndicator=!0,e.transactionIndicator=!1,o.loaderIndicator=!0,a.getInsuranceDetailsForAdmin().then(function(t){o.loaderIndicator=!1,e.insuranceList=t.data.data,console.log(e.insuranceList)}),o.loaderIndicator=!0,a.getQualifications().then(function(t){o.loaderIndicator=!1,e.qualificationList=t.data.data,console.log(e.qualificationList)})},e.openUserSection=function(){e.categoryIndicator=!1,e.blogIndicator=!1,e.taskIndicator=!1,e.userIndicator=!0,e.transactionIndicator=!1,o.loaderIndicator=!0,a.allUserDetails().then(function(t){"Transaction Found!"==t.data.message?(e.userList=t.data.data,o.loaderIndicator=!1,e.userIndicator=!0):o.loaderIndicator=!1,o.loaderIndicator=!1})},e.openPaymentSection=function(){e.categoryIndicator=!1,e.blogIndicator=!1,e.taskIndicator=!1,e.userIndicator=!1,e.paymentIndicator=!0,e.insuranceIndicator=!1,e.transactionIndicator=!1,u()},e.openTranscation=function(){e.categoryIndicator=!1,e.blogIndicator=!1,e.taskIndicator=!1,e.userIndicator=!1,e.paymentIndicator=!1,e.insuranceIndicator=!1,e.transactionIndicator=!0,o.loaderIndicator=!0,a.getTransactionHistory().then(function(e){o.loaderIndicator=!1,console.log("ts",e)})},e.openAddCategoryPopup=function(){$("#addCategoryPopup").modal("show"),$("#categoryName").val(""),$("#categoryImage").val("")},e.deleteCategory=function(e){1==confirm("Are you sure you want to delete category ?")&&(o.loaderIndicator=!0,a.deleteCategory(e.id).then(function(e){l(),o.loaderIndicator=!1}))},e.deactivateUser=function(r){o.loaderIndicator=!0;var i=t.getUserid();a.deactivate(i).then(function(t){"User deactivated!"==t.data.message?(o.loaderIndicator=!1,alert("User deactivated successfully"),e.userIndicator=!0):o.loaderIndicator=!1,o.loaderIndicator=!1})},o.$on("addedCategory",function(e,t){l()}),o.$on("addedBlogs",function(e,t){d()}),e.openBlogSection=function(){e.categoryIndicator=!1,e.blogIndicator=!0,e.taskIndicator=!1,e.userIndicator=!1,e.paymentIndicator=!1,e.insuranceIndicator=!1,e.transactionIndicator=!1,d()},e.openTaskSection=function(){e.categoryIndicator=!1,e.blogIndicator=!1,e.taskIndicator=!0,e.userIndicator=!1,e.paymentIndicator=!1,e.insuranceIndicator=!1,e.transactionIndicator=!1,c()},e.openAddBlogPopup=function(){$("#addBlogPopup").modal("show")},e.deleteTask=function(e){1==confirm("Are you sure you want to delete this Task ?")&&(o.loaderIndicator=!0,a.deleteTask(e.id).then(function(e){c(),o.loaderIndicator=!1}))},e.deleteBlog=function(e){1==confirm("Are you sure you want to delete this Blog?")&&(o.loaderIndicator=!0,a.deleteBlog(e.id).then(function(e){d(),o.loaderIndicator=!1}))},e.releasePayment=function(e){o.loaderIndicator=!0;var r={taskId:e,actionType:"PAY",currencyCode:"USD",receiverList:{receiver:[{amount:"0.01",email:"kanikasethi04@gmail.com"}]},returnUrl:"http://uat.eventbid.com.au/#/admin/payments",cancelUrl:"http://uat.eventbid.com.au/#/admin",requestEnvelope:{errorLanguage:"en_US",detailLevel:"ReturnAll"}};a.paypal(r).then(function(e){"PayKey Generated"==e.data.message?(o.loaderIndicator=!1,t.setCookieValues("paykey",e.data.data.payKey),i.location.href=" https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay?paykey="+e.data.data.payKey):o.loaderIndicator=!1})}}]),app.controller("browseTaskCtrl",["$scope","httpService","$rootScope","commonService","CONSTANTS","$routeParams",function(e,t,a,o,r,i){function s(e){return e.category_question=angular.fromJson(e.category_question),e}function n(e){var t=e.split("-");return new Date(t[2],t[1]-1,t[0])}e.currentPage=1,e.numPerPage=25,e.maxSize=5,e.countIndicator=0,e.anchorDisable=!0,e.anchorReplyDisable=!0,e.userDetails={},$(document).ready(function(){o.scrollToTop(),new Date,$("#datetimepicker1").datetimepicker({pickDate:!0,pickTime:!1,format:"DD-MM-YYYY",changeMonth:!0,changeYear:!0}).on("dp.change",function(){$(this).trigger("blur")}),$("#datetimepicker2").datetimepicker({pickDate:!0,pickTime:!1,format:"DD-MM-YYYY",changeMonth:!0,changeYear:!0}).on("dp.change",function(){$(this).trigger("blur")});var r,n=i.categoryId;n?(r=n,a.loaderIndicator=!0,e.pageNum=1,t.browseTaskByCategory(r,e.pageNum).then(function(t){e.taskList=t.data.data,e.taskList=e.taskList.map(s),a.loaderIndicator=!1,o.scrollToTop()})):(e.pageNum=1,a.loaderIndicator=!0,t.browseAllTask(e.pageNum).then(function(t){e.taskList=t.data.data,e.taskList=e.taskList.map(s),console.log(e.taskList),e.originalTaskList=e.taskList,a.loaderIndicator=!1}))}),e.openSignupModal=function(){$("#signUpPopup").modal("toggle")},e.openLoginModal=function(){$("#loginPopup").modal("toggle")},e.paypalAccount=function(){var r=o.getUserid();a.loaderIndicator=!0,""!=e.userDetails.paypalAccount&&null!=e.userDetails.paypalAccount?(e.emailIndicator=!1,t.updateProfile(r,e.userDetails).then(function(t){"Profile updated successfully"==t.data.message?(a.loaderIndicator=!1,$("#taskDetailModal").modal("hide"),$("#showInterestPopup").modal("toggle"),$("#showInterestPopup").modal({backdrop:"static"}),$("#showInterestPopup").modal("show"),$("#addPaypalAccountPopup").modal("hide"),e.interestedUser={},e.errorMessageIndicator=!1,e.interestedUser.offerImages=[],e.interestedUser.showInterestCostType=e.showInterestCostType,e.errorMessage=!1):a.loaderIndicator=!1})):(e.emailIndicator=!0,a.loaderIndicator=!1)},e.closePaypal=function(){$("#addPaypalAccountPopup").modal("hide")},e.showInterestPopup=function(){var a=o.getUserid();t.getUserDetails(a).then(function(t){"Record found successfully."==t.data.message&&(e.userDetails=t.data.data,""!=e.userDetails.paypalAccount&&null!=e.userDetails.paypalAccount?($("#taskDetailModal").modal("hide"),$("#showInterestPopup").modal("toggle"),$("#showInterestPopup").modal({backdrop:"static"}),$("#showInterestPopup").modal("show"),e.interestedUser={},e.errorMessageIndicator=!1,e.interestedUser.offerImages=[],e.interestedUser.showInterestCostType=e.showInterestCostType,e.errorMessage=!1):($("#taskDetailModal").modal("hide"),$("#addPaypalAccountPopup").modal("show")))})},e.showOfferImagesPreview=function(){$("#showInterestPopup").modal("hide"),$("#offerImagesPopup").modal("show")},e.offerImagesPopupClose=function(){$("#offerImagesPopup").modal("hide"),$("#showInterestPopup").modal("show")},e.getDataByDate=function(){if(e.fromDate=$("#datetimepicker1").val(),e.toDate=$("#datetimepicker2").val(),e.fromDate&&e.toDate){for(var t=n(e.fromDate),a=n(e.toDate),o=[],r=0;r<e.originalTaskList.length;r++){var i=new Date(e.originalTaskList[r].date_required),s=new Date(e.originalTaskList[r].date_required);i>=t&&s<=a&&o.push(e.originalTaskList[r])}e.taskList=o}},e.deletePhoto=function(t){var a=e.interestedUser.offerImages.indexOf(t);e.interestedUser.offerImages.splice(a,1)},e.resetFilters=function(){o.reloadRoute(),o.scrollToTop()},a.$on("imageAdded",function(t,a,r){a&&(e.errorMessageIndicator=!1,"offerImages"==r&&e.offerImages&&(e.interestedUser.offerImages&&e.interestedUser.offerImages.length<3?(e.interestedUser.offerImages.push(a),setTimeout(function(){$("#offerImages").val("")},2e3)):(e.errorMessageIndicator=!0,e.message="Only three images are allowed for uploading.",o.scrollToTop())))}),e.numPages=function(){return Math.ceil(e.taskList.length/e.numPerPage)},e.openSelectedtaskInDetail=function(t){if(a.isLogin)switch(e.interested=!1,e.anchorDisable=!0,e.anchorReplyDisable=!0,$("#taskDetailModal").modal("toggle"),$("#taskDetailModal").modal({backdrop:"static"}),$("#taskDetailModal").modal("show"),e.taskDetail={},e.taskDetail=t,e.taskDetail.category_Detail={},e.getAllComments(e.taskDetail.id),e.taskDetail.category.name){case r.CATEGORY.Catering:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.cateringType]=e.taskDetail.category_question.cateringType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.mealType]=e.taskDetail.category_question.mealType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.drinkType]=e.taskDetail.category_question.drinkType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.menuRequests]=e.taskDetail.category_question.menuRequests,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.waitingRequire]=e.taskDetail.category_question.waitingRequire,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.dietaryRequirement]=e.taskDetail.category_question.dietaryRequirement,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.totalGuest]=e.taskDetail.category_question.totalGuest,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.costType]=e.taskDetail.category_question.costType,e.showInterestCostType=e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.costType];break;case r.CATEGORY.Cleaning:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.cleanersNeeded]=e.taskDetail.category_question.cleanersNeeded,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.cleaningChecklist]=e.taskDetail.category_question.cleaningChecklist,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.cleaningChecklist]=e.taskDetail.category_question.cleaningChecklist.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.equipmentRequired]=e.taskDetail.category_question.equipmentRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.timeRequired]=e.taskDetail.category_question.timeRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.costType]=e.taskDetail.category_question.costType,e.showInterestCostType=e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.costType];break;case r.CATEGORY.Patisserie:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.cakeTypes]=e.taskDetail.category_question.cakeTypes.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.describeReq]=e.taskDetail.category_question.describeReq,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.desertType]=e.taskDetail.category_question.desertType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.dietaryRequirement]=e.taskDetail.category_question.dietaryRequirement,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.numberOfDesert]=e.taskDetail.category_question.numberOfDesert,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.costType]=e.taskDetail.category_question.costType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.desertImages]=e.taskDetail.category_question.desertImages,e.showInterestCostType=e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.costType];break;case r.CATEGORY.Waiting_Staff:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.dressCode]=e.taskDetail.category_question.dressCode,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.dressCodeDescription]=e.taskDetail.category_question.dressCodeDescription,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.totalCostType]=e.taskDetail.category_question.totalCostType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.totalWaiter]=e.taskDetail.category_question.totalWaiter,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.waitersTask]=e.taskDetail.category_question.waitersTask,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.bartender_count]=e.taskDetail.category_question.bartender_count,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.is_bartender_req]=e.taskDetail.category_question.is_bartender_req,e.showInterestCostType=e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.totalCostType];break;case r.CATEGORY.Graphic_Design:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.totalBudgetForbanners]=e.taskDetail.category_question.totalBudgetForbanners,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.numberOfBanners]=e.taskDetail.category_question.numberOfBanners,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.designPrinted]=e.taskDetail.category_question.designPrinted,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.additionalInformation]=e.taskDetail.category_question.additionalInformation,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.graphicBanners]=e.taskDetail.category_question.graphicBanners.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.graphicImages]=e.taskDetail.category_question.graphicImages,e.showInterestCostType="Total Cost";break;case r.CATEGORY.Supply_Hire:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.decriptionInDetail]=e.taskDetail.category_question.decriptionInDetail,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.returnSupplies]=e.taskDetail.category_question.returnSupplies,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.IscleaningPriceToBeIncluded]=e.taskDetail.category_question.IscleaningPriceToBeIncluded,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.supplyTypes]=e.taskDetail.category_question.supplyTypes.join([separator=","]),e.showInterestCostType="Total Cost";break;case r.CATEGORY.Hair_and_Beauty:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.hairStyleRequired]=e.taskDetail.category_question.hairStyleRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.location]=e.taskDetail.category_question.location,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.makeUpTypeRequired]=e.taskDetail.category_question.makeUpTypeRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.needToBring]=e.taskDetail.category_question.needToBring,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.specialRequestsForHairStyle]=e.taskDetail.category_question.specialRequestsForHairStyle,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.specialRequirement]=e.taskDetail.category_question.specialRequirement,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.serviceType]=e.taskDetail.category_question.serviceType.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.hairType]=e.taskDetail.category_question.hairType.join([separator=","]),e.showInterestCostType="Total Cost";break;case r.CATEGORY.Entertainment_and_talent:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Entertainment_and_talent.entertainerRequired]=e.taskDetail.category_question.entertainerRequired.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Entertainment_and_talent.equipmentReadyForTalent]=e.taskDetail.category_question.equipmentReadyForTalent,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Entertainment_and_talent.thingsRequiredForTalent]=e.taskDetail.category_question.thingsRequiredForTalent,e.showInterestCostType="Total Cost";break;case r.CATEGORY.Car_and_Venue_Hire:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.carType]=e.taskDetail.category_question.carType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.hireType]=e.taskDetail.category_question.hireType.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalCars]=e.taskDetail.category_question.totalCars,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalCostType]=e.taskDetail.category_question.totalCostType,e.showInterestCostType=e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalCostType],e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalGuest]=e.taskDetail.category_question.totalGuest,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.venueCleaning]=e.taskDetail.category_question.venueCleaning,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.venueType]=e.taskDetail.category_question.venueType,e.showInterestCostType=e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalCostType];break;case r.CATEGORY.Floristry:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.arrangementPresentation]=e.taskDetail.category_question.arrangementPresentation,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.costType]=e.taskDetail.category_question.costType,e.showInterestCostType=e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.costType],e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.flowersRequiredDescription]=e.taskDetail.category_question.flowersRequiredDescription,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.specialRequestDesc]=e.taskDetail.category_question.specialRequestDesc,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.totalCost]=e.taskDetail.category_question.totalCost,e.showInterestCostType=e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.costType];break;case r.CATEGORY.Photography_Videography:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.eventRequirement]=e.taskDetail.category_question.eventRequirement.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalPhotographerRequired]=e.taskDetail.category_question.totalPhotographerRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.additionalComments]=e.taskDetail.category_question.additionalComments,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.placesRequiredForPhotographers]=e.taskDetail.category_question.placesRequiredForPhotographers,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.servicesRequired]=e.taskDetail.category_question.servicesRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalGuest]=e.taskDetail.category_question.totalGuest,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.servicesRequiredVideographer]=e.taskDetail.category_question.servicesRequiredVideographer,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalvideographerRequired]=e.taskDetail.category_question.totalvideographerRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalGuestVideography]=e.taskDetail.category_question.totalGuestVideography,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.placesRequiredForVideographer]=e.taskDetail.category_question.placesRequiredForVideographer,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.additionalCommentsVideographer]=e.taskDetail.category_question.additionalCommentsVideographer,e.showInterestCostType="Total cost"}else $("#promptLoginPopup").modal("show")},e.formatDate=function(e){return new Date(e)},e.showInterest=function(r){if(1==a.isLogin)if(e.showInterestForm.$setSubmitted(!0),e.showInterestForm.$valid){var i={};i.taskId=r.id,i.taskPostedUserID=r.post_user_id,i.showInterestedUserID=o.getUserid(),i.taskStatus="looking_user_offers",i.offerCost=e.interestedUser.offerCost,i.showInterestCostType=e.interestedUser.showInterestCostType,i.commentDescription=e.interestedUser.commentDescription,e.interestedUser.offerImages.length>0&&(i.offerImages=e.interestedUser.offerImages),a.loaderIndicator=!1,t.showInterest(i).then(function(t){a.loaderIndicator=!1,200==t.data.code&&($("#showInterestPopup").modal("hide"),$("#sucessShowInterestPopup").modal("show"),e.interestedUser={})})}else e.errorMessage=!0;else $("#taskDetailModal").modal("toggle"),$("#promptLoginPopup").modal("show")},e.seeMoreClick=function(){e.pageNum=e.pageNum+1,t.browseAllTask(e.pageNum).then(function(t){var o=t.data.data;o.length>0?((o=o.map(s)).length>0&&$.merge(e.taskList,o),a.loaderIndicator=!1):($("#seeMore").hide(),$("#noRecord").show())})},e.addComment=function(){if(e.commentDescription){var r={};r.commentDescription=e.commentDescription,r.taskId=e.taskDetail.id,r.userId=o.getUserid(),a.loaderIndicator=!0,t.postComment(r).then(function(t){"comment posted successfully."==t.data.message&&(e.commentDescription="",e.getAllComments(e.taskDetail.id),a.loaderIndicator=!1)})}},e.addCommentChange=function(){e.commentDescription&&""!=e.commentDescription?e.anchorDisable=!1:e.anchorDisable=!0},e.getAllComments=function(o){e.commentList={},t.getAllComment(o).then(function(t){a.loaderIndicator=!0,"Comments list"==t.data.message?(e.commentList=t.data.data,e.countIndicator=e.commentList.length,a.loaderIndicator=!1):(this.commentIndicator=!1,a.loaderIndicator=!1)})},e.replyComment=function(r,i){var s={};s.commentDescription=r,s.taskId=e.taskDetail.id,s.userId=o.getUserid(),s.commentId=i,a.loaderIndicator=!0,t.replyComment(s).then(function(t){"Comment replied!"==t.data.message&&(e.replyCommentDesc="",e.getAllComments(e.taskDetail.id),s={})})},e.onReply=function(t){$("#item_"+t.id).show(),e.anchorDisable=!0},e.addCommentReplyChange=function(t){e.anchorReplyDisable=!t||""==t},e.checkIfReplyExists=function(t,a){return e.repliedObjectList={},e.repliedObjectList=$.grep(a,function(e){return e.commentId===t}),e.repliedObjectList.length>0},app.filter("dateFilter",function(){return function(e){}})}]),app.controller("customerDashboardCtrl",["$scope",function(e){}]),app.controller("buisnessDashboardCtrl",["$scope","commonService","$rootScope","httpService","CONSTANTS",function(e,t,a,o,r){var i;function s(){switch(e.taskDetail.category.name){case r.CATEGORY.Catering:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.cateringType]=e.taskDetail.category_question.cateringType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.mealType]=e.taskDetail.category_question.mealType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.drinkType]=e.taskDetail.category_question.drinkType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.menuRequests]=e.taskDetail.category_question.menuRequests,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.waitingRequire]=e.taskDetail.category_question.waitingRequire,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.dietaryRequirement]=e.taskDetail.category_question.dietaryRequirement,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.totalGuest]=e.taskDetail.category_question.totalGuest,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Catering.costType]=e.taskDetail.category_question.costType;break;case r.CATEGORY.Cleaning:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.cleanersNeeded]=e.taskDetail.category_question.cleanersNeeded,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.cleaningChecklist]=e.taskDetail.category_question.cleaningChecklist,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.equipmentRequired]=e.taskDetail.category_question.equipmentRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.timeRequired]=e.taskDetail.category_question.timeRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.costType]=e.taskDetail.category_question.costType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Cleaning.cleaningChecklist]=e.taskDetail.category_question.cleaningChecklist.join([separator=","]);break;case r.CATEGORY.Patisserie:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.cakeTypes]=e.taskDetail.category_question.cakeTypes.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.describeReq]=e.taskDetail.category_question.describeReq,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.desertType]=e.taskDetail.category_question.desertType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.dietaryRequirement]=e.taskDetail.category_question.dietaryRequirement,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.numberOfDesert]=e.taskDetail.category_question.numberOfDesert,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.costType]=e.taskDetail.category_question.costType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Patisserie.desertImages]=e.taskDetail.category_question.desertImages;break;case r.CATEGORY.Waiting_Staff:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.dressCode]=e.taskDetail.category_question.dressCode,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.dressCodeDescription]=e.taskDetail.category_question.dressCodeDescription,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.totalCostType]=e.taskDetail.category_question.totalCostType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.totalWaiter]=e.taskDetail.category_question.totalWaiter,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.waitersTask]=e.taskDetail.category_question.waitersTask,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.bartender_count]=e.taskDetail.category_question.bartender_count,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Waiting_Staff.is_bartender_req]=e.taskDetail.category_question.is_bartender_req;break;case r.CATEGORY.Graphic_Design:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.totalBudgetForbanners]=e.taskDetail.category_question.totalBudgetForbanners,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.numberOfBanners]=e.taskDetail.category_question.numberOfBanners,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.designPrinted]=e.taskDetail.category_question.designPrinted,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.additionalInformation]=e.taskDetail.category_question.additionalInformation,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.graphicBanners]=e.taskDetail.category_question.graphicBanners.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Graphic_Design.graphicImages]=e.taskDetail.category_question.graphicImages;break;case r.CATEGORY.Supply_Hire:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.decriptionInDetail]=e.taskDetail.category_question.decriptionInDetail,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.returnSupplies]=e.taskDetail.category_question.returnSupplies,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.IscleaningPriceToBeIncluded]=e.taskDetail.category_question.IscleaningPriceToBeIncluded,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Supply_Hire.supplyTypes]=e.taskDetail.category_question.supplyTypes.join([separator=","]);break;case r.CATEGORY.Hair_and_Beauty:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.hairStyleRequired]=e.taskDetail.category_question.hairStyleRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.location]=e.taskDetail.category_question.location,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.makeUpTypeRequired]=e.taskDetail.category_question.makeUpTypeRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.needToBring]=e.taskDetail.category_question.needToBring,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.specialRequestsForHairStyle]=e.taskDetail.category_question.specialRequestsForHairStyle,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.specialRequirement]=e.taskDetail.category_question.specialRequirement,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.serviceType]=e.taskDetail.category_question.serviceType.join([separator=","]),e.taskDetail.category_question.hairType&&(e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Hair_and_Beauty.hairType]=e.taskDetail.category_question.hairType.join([separator=","]));break;case r.CATEGORY.Entertainment_and_talent:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Entertainment_and_talent.entertainerRequired]=e.taskDetail.category_question.entertainerRequired.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Entertainment_and_talent.equipmentReadyForTalent]=e.taskDetail.category_question.equipmentReadyForTalent,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Entertainment_and_talent.thingsRequiredForTalent]=e.taskDetail.category_question.thingsRequiredForTalent;break;case r.CATEGORY.Car_and_Venue_Hire:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.carType]=e.taskDetail.category_question.carType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.hireType]=e.taskDetail.category_question.hireType.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalCars]=e.taskDetail.category_question.totalCars,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalCost]=e.taskDetail.category_question.totalCost,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalCostType]=e.taskDetail.category_question.totalCostType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.totalGuest]=e.taskDetail.category_question.totalGuest,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.venueCleaning]=e.taskDetail.category_question.venueCleaning,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Car_and_Venue_Hire.venueType]=e.taskDetail.category_question.venueType;break;case r.CATEGORY.Floristry:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.arrangementPresentation]=e.taskDetail.category_question.arrangementPresentation,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.costType]=e.taskDetail.category_question.costType,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.flowersRequiredDescription]=e.taskDetail.category_question.flowersRequiredDescription,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.specialRequestDesc]=e.taskDetail.category_question.specialRequestDesc,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Floristry.totalCost]=e.taskDetail.category_question.totalCost;break;case r.CATEGORY.Photography_Videography:e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.eventRequirement]=e.taskDetail.category_question.eventRequirement.join([separator=","]),e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalPhotographerRequired]=e.taskDetail.category_question.totalPhotographerRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.additionalComments]=e.taskDetail.category_question.additionalComments,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.placesRequiredForPhotographers]=e.taskDetail.category_question.placesRequiredForPhotographers,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.servicesRequired]=e.taskDetail.category_question.servicesRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalGuest]=e.taskDetail.category_question.totalGuest,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.servicesRequiredVideographer]=e.taskDetail.category_question.servicesRequiredVideographer,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalvideographerRequired]=e.taskDetail.category_question.totalvideographerRequired,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.totalGuestVideography]=e.taskDetail.category_question.totalGuestVideography,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.placesRequiredForVideographer]=e.taskDetail.category_question.placesRequiredForVideographer,e.taskDetail.category_Detail[r.CATEGORY_QUESTIONS.Photography_Videography.additionalCommentsVideographer]=e.taskDetail.category_question.additionalCommentsVideographer}}function n(r){var i=t.getUserid(),s={};s.taskId=r,s.poster_userid=i,a.loaderIndicator=!0,o.getPersonalMessage(s).then(function(t){"Success"==t.data.message?(e.commentDescription="",e.commentList=t.data.data,e.countIndicator=e.commentList.length,a.loaderIndicator=!1,e.CommentRecordIndicator=!0,a.loaderIndicator=!1,e.messageUser=!1):a.loaderIndicator=!1})}function l(){a.loaderIndicator=!0,o.getBuisnessTask(a.userID).then(function(r){console.log(r),200==r.data.code?(a.loaderIndicator=!1,e.openTask=[],e.progressTask=[],e.looking_user_offers=[],r.data.data.open&&(e.potentialJobsIndicator=!0,a.loaderIndicator=!1,e.openTask=r.data.data.open),r.data.data.assigned&&(e.jobsInProgressIndicator=!0,a.loaderIndicator=!1,e.progressTask=r.data.data.assigned,t.getUserid(),a.loaderIndicator=!0,o.getPersonalMessage({}).then(function(t){t.data.data.length>=1?(e.messageList=t.data.data,a.loaderIndicator=!1):a.loaderIndicator=!1})),r.data.data.looking_user_offers&&(e.looking_user_Indicator=!0,a.loaderIndicator=!1,e.looking_user_offers=r.data.data.looking_user_offers[0])):404==r.data.code&&(a.loaderIndicator=!1,e.potentialJobsIndicator=!1,e.jobsInProgressIndicator=!1,e.looking_user_Indicator=!1,e.openTask=[])})}t.checkUserLoggedIn(),e.potentialJobsIndicator=!1,e.jobsInProgressIndicator=!1,e.jobsNeedActionIndicator=!1,e.jobsCompletedIndicator=!1,e.invoicesIndicator=!1,e.deleteMsg=!1,e.assignMsg=!1,e.reviewsIndicator=!1,e.anchorDisable=!0,e.buisnessDashboardIndicator=!0,e.reviewDetail={},e.ratingList=[1,2,3,4,5],function(){e.dayArray=[];for(var t=1;t<=9;t++)e.dayArray.push("0"+t);e.monthArray=[1,2,3,4,5,6,7,8,9,10,11,12];var a=(new Date).getFullYear();e.yearArray=[];for(var t=a;t<=2067;t++)e.yearArray.push(t)}(),l(),i=t.getUserid(),e.userId=i,a.loaderIndicator=!0,o.getMessageOnDashBoard(i).then(function(t){t.data.data.length>=1?(e.reviewsIndicator=!1,e.dashboardMessage=t.data.data,a.loaderIndicator=!1):(a.loaderIndicator=!1,e.reviewsIndicator=!0)}),e.changedValue=function(t){e.ratingList=[],t=void 0==t?5:t;for(var a=1;a<=t;a++)e.ratingList.push(a)},e.openSelectedtaskInDetail=function(r){var i,n;$("#OpenTaskModal").modal({backdrop:"static"}),$("#OpenTaskModal").modal({backdrop:"static",keyboard:!1},"show"),e.cardDetails={},e.taskDetail={},e.taskDetail=r,e.taskDetail.category_Detail={},e.taskDetail.category_question=angular.fromJson(r.category_question),i=r.id,a.loaderIndicator=!0,e.taskid=i,o.getInterestedUsersList(i).then(function(t){a.loaderIndicator=!1,200==t.data.code?(e.interestedUsersList=t.data.data,e.interestedUsersListCount=e.interestedUsersList.length):e.interestedUsersListCount=0}),s(),"false"==e.taskDetail.isPaymentMade&&(n={userId:t.getUserid()},a.loaderIndicator=!0,o.getCardDetails(n).then(function(t){a.loaderIndicator=!1,"false"==e.taskDetail.isPaymentMade?"No card added yet!"==t.data.message?(e.cardDetailsAlreadySaved=!1,e.NoCardDetailsFound=!0):(e.card={},e.card=t.data.result[0],e.cardDetailsAlreadySaved=!0,e.NoCardDetailsFound=!1):(e.cardDetailsAlreadySaved=!1,e.NoCardDetailsFound=!1)}))},e.openProgresstaskInDetail=function(a){e.showFeedbackForm=!0,$("#progressTaskModal").modal("toggle"),$("#progressTaskModal").modal({backdrop:"static"}),$("#progressTaskModal").modal({backdrop:"static",keyboard:!1},"show"),e.userId=t.getUserid(),e.taskDetail={},e.taskDetail=a,e.taskDetail.category_Detail={},e.taskDetail.category_question=angular.fromJson(a.category_question),e.messageUser=!1,n(a.id),s(),$("#assignBtn").attr("disabled","disabled")},e.calculateCharges=function(t){e.totalPaymentMade=t+e.serviceCharges},e.makePaymentByAddingCard=function(r,i,s){i.$setSubmitted(!0),i.$valid?(a.loaderIndicator=!0,e.cardDetails.userId=t.getUserid(),e.cardDetails.taskId=e.taskid,e.cardDetails.amount=s,o.makePayment(e.cardDetails).then(function(t){"Payment has been successfully done!"==t.data.message&&1==t.data.success?(a.loaderIndicator=!1,i.$setPristine(),i.$setUntouched(),e.successMessageIndicator=!0,e.errorMessageIndicator=!1,e.message="Payment done successfully.Please assign task.",e.cardDetails={},$("#assignBtn").removeAttr("disabled")):(a.loaderIndicator=!1,i.$setPristine(),i.$setUntouched(),e.successMessageIndicator=!1,e.errorMessageIndicator=!0,e.message=t.message,e.cardDetails={})})):(e.errorMessageIndicator=!0,e.message="Please enter required details.")},e.assignTaskToUser=function(t){e.paymentMadeBeforeAssignment||"true"==e.taskDetail.isPaymentMade?(a.loaderIndicator=!0,e.assignTask={},e.assignTask.taskId=t.taskId,e.assignTask.taskPostedUserID=t.taskPostedUserID,e.assignTask.assignUserID=t.showInterestedUserID,e.assignTask.taskStatus="assigned",o.assignUser(e.assignTask).then(function(e){$("#OpenTaskModal").modal("hide"),alert("task assigned successfully"),l(),a.loaderIndicator=!1})):alert("please make payment before assigning a task.")},e.makePayment=function(r){if(r>0){var i={};e.amountMessage="",e.amountIndicator=!1,i.card_id=e.card.card_id,i.amount=r,i.userId=t.getUserid(),i.taskId=e.taskid,i.first_name=e.card.first_name,i.last_name=e.card.last_name,a.loaderIndicator=!0,o.paymentByCard(i).then(function(t){a.loaderIndicator=!1,0==t.data.success?(e.paymentMadeBeforeAssignment=!1,e.paymentSuccessMessage="Payment failed ! Credit card was refused."):(e.paymentMadeBeforeAssignment=!0,e.paymentSuccessMessage="Payment successfull. Please proceed to assign task.",$("#assignBtn").removeAttr("disabled"))})}else e.amountIndicator=!0,e.amountMessage="Please enter valid amount"},e.deleteTask=function(e){1==confirm("Are you sure you want to delete this task ?")&&o.deleteTask(e.id).then(function(e){$("#OpenTaskModal").modal("hide"),getBuisnessTask()})},e.addCommentChange=function(){e.commentDescription&&""!=e.commentDescription?e.anchorDisable=!1:e.anchorDisable=!0},e.addComment=function(){if(e.commentDescription){var r={};r.comments=e.commentDescription,r.taskId=e.taskDetail.id,r.userId=t.getUserid(),a.loaderIndicator=!0,o.addPersonalMessage(r).then(function(t){"Message added successfully."==t.data.message&&(e.commentDescription="",n(e.taskDetail.id),a.loaderIndicator=!1,e.messageUser=!1)})}},e.getAllComments=function(t){e.commentList={},o.getAllComment(t).then(function(t){a.loaderIndicator=!0,"Comments list"==t.data.message&&(e.commentList=t.data.data,e.countIndicator=e.commentList.length,a.loaderIndicator=!1,e.CommentRecordIndicator=!0),"Record not found!"==t.data.message?(this.commentIndicator=!1,a.loaderIndicator=!1,e.CommentRecordIndicator=!1):(this.commentIndicator=!1,a.loaderIndicator=!1)})},e.messageView=function(){e.messageUser=!0,e.commentDescription=""},e.showBuisnessTab=function(){e.buisnessDashboardIndicator=!0,e.customerDashboardIndicator=!1},e.showCustomerTab=function(){e.buisnessDashboardIndicator=!1,e.customerDashboardIndicator=!0,function(){a.loaderIndicator=!0,o.getCustomerTask(a.userID).then(function(t){console.log(t),200==t.data.code?(e.openTaskCustomer=[],e.progressTaskCustomer=[],a.loaderIndicator=!1,t.data.data.open&&(e.potentialJobsCustomerIndicator=!0,a.loaderIndicator=!1,e.openTaskCustomer=t.data.data.open),t.data.data.assigned&&(e.jobsInProgressCustomerIndicator=!0,a.loaderIndicator=!1,e.progressTaskCustomer=t.data.data.assigned),t.data.data.completed&&(e.jobsCompletedCustomerIndicator=!0,a.loaderIndicator=!1,e.completedTaskCustomer=t.data.data.completed)):404==t.data.code&&(a.loaderIndicator=!1,e.potentialJobsCustomerIndicator=!1,e.jobsInProgressCustomerIndicator=!1,e.openTaskCustomer=[])});var r=t.getUserid();a.loaderIndicator=!0,o.getRecommendationTask(r).then(function(t){200==t.data.code&&"Recommended Task"==t.data.message?(e.recommendationJobsCustomerIndicator=!0,a.loaderIndicator=!1,e.recommendedTaskCustomer=t.data.data):(e.recommendationJobsCustomerIndicator=!1,a.loaderIndicator=!1)})}()},e.completeTask=function(t){if(e.reviewDetail.review&&e.reviewDetail.doersRating){e.reviewErrorMessageIndicator=!1,a.loaderIndicator=!0;var r={},i=t.id;r.task_status="completed",o.updateTask(i,r).then(function(e){$("#progressTaskModal").modal("hide"),l(),alert("task completed"),a.loaderIndicator=!1})}else e.reviewErrorMessageIndicator=!0,e.reviewMessage="Please enter the review"},e.submitReview=function(t,a){a.$setSubmitted(!0),a.$valid?(e.reviewErrorMessageIndicator=!1,e.reviewDetail.feedback=[{name:e.taskDetail.event_title},{messge:t.review}],e.reviewDetail.review_rating=[{name:e.taskDetail.event_title},{rating:t.doersRating}],o.updateProfile(e.taskDetail.seeker_user_id,e.reviewDetail).then(function(t){e.showFeedbackForm=!1,e.feedbackMessage="Thank You for your valuable feedback"})):(e.reviewErrorMessageIndicator=!0,e.reviewMessage="Please enter the review")},e.onReply=function(t){$("#item_"+t.id).show(),e.anchorDisable=!0},e.addCommentReplyChange=function(t){e.anchorReplyDisable=!t||""==t},e.checkIfReplyExists=function(t,a){return e.repliedObjectList={},e.repliedObjectList=$.grep(a,function(e){return e.commentId===t}),e.repliedObjectList.length>0},e.replyComment=function(r,i){var s={};s.commentDescription=r,s.taskId=e.taskDetail.id,s.userId=t.getUserid(),s.commentId=i,a.loaderIndicator=!0,o.replyComment(s).then(function(t){"Comment replied!"==t.data.message&&(e.replyCommentDesc="",e.getAllComments(e.taskDetail.id),s={})})}}]),app.controller("addBlogController",["$scope","httpService","$rootScope",function(e,t,a){e.addNewBlog=function(){e.addBlogForm.$setSubmitted(!0),e.addBlogForm.$valid?(a.loaderIndicator=!0,t.addBlog(e.blog).then(function(t){"Blog created successfully."==t.data.message?(a.loaderIndicator=!1,e.successMessageIndicator=!0,e.ErrorIndicator=!1,e.message="Blog added successfully.",e.blog={},$("#blogHeading").val(""),$("#blogcategory").val(""),$("#blog_image").val(""),$("#blog_description").val(""),$("#blogHeaderImage").val(""),window.location.reload(!0)):"Request URL not available"==t.data.message&&(a.loaderIndicator=!1,e.message="Something went wrong. Technical issues.",e.ErrorIndicator=!0)})):(e.message="Please enter blog name.",e.ErrorIndicator=!0,e.successMessageIndicator=!1)},e.ModalClose=function(){e.category={},e.ErrorIndicator=!1,e.successMessageIndicator=!1,angular.element("#blogHeading").removeClass("error")},e.blog={}}]),app.controller("settingsCtrl",["$scope","httpService","commonService","$rootScope","$location","$window",function(e,t,a,o,r,i){var s;function n(){e.dayArray=[];for(var t=1;t<=9;t++)e.dayArray.push("0"+t);e.monthArray=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var a=(new Date).getFullYear();e.yearArray=[];for(t=a;t<=2067;t++)e.yearArray.push(""+t)}function l(){var o={userId:a.getUserid()};t.getCardDetails(o).then(function(t){"No card added yet!"==t.data.message?(n(),e.cardDetails={},e.creditCardDetailsIndicator=!1):(e.creditCardDetailsIndicator=!0,e.card={},e.card=t.data.result[0])})}e.accountIndicator=!0,a.scrollToTop(),e.portfolioImageArray=[],s=a.getUserid(),t.getUserDetails(s).then(function(t){if("Record found successfully."==t.data.message){e.userDetails=t.data.data,e.insurancetList=t.data.data.insurance,e.qualificationList=t.data.data.qualification,e.showInsuDetail=""!=e.insurancetList,e.showQuaDetail=""!=e.qualificationList;var a=e.userDetails.birthday;if(null!=e.userDetails.verification_skills){var o=e.userDetails.verification_skills,r=JSON.parse("["+o+"]");e.userDetails.skill=r[0]}null!=a&&(a=a.split("/"),e.userDetails.day=a[0],e.userDetails.month=a[1],e.userDetails.year=a[2]),e.portfolioImageArray=[],e.userDetails&&e.userDetails.portfolio&&"Array"!=e.userDetails.portfolio&&"NULL"!=e.userDetails.portfolio&&(e.userDetails.portfolio=e.userDetails.portfolio.replace(/\\\//g,"/"),e.userDetails.portfolio=e.userDetails.portfolio.replace(/^\[(.+)\]$/,"$1"),e.userDetails.portfolio=e.userDetails.portfolio.replace(/['"]+/g,""),e.portfolioImageArray=e.userDetails.portfolio.split(",")),e.selectedCategories=e.userDetails.category_id.split(",");for(var i=0;i<e.selectedCategories.length;i++)e.selectedCategories[i]=+e.selectedCategories[i];t.data.data.mobile&&(e.userDetails.mobile=parseInt(t.data.data.mobile))}}),e.selectedCategories,e.categoryList=[],e.insuranceDetails={},e.passwordDetails={},e.qualificationDetails={},e.cardDetailIndicator=!1,e.updateCardDetailIndicator=!1,e.buttonIndicator=!0,e.insurancetList=[],e.qualificationList=[],e.skillIndex=[1,2,3],t.getCategory().then(function(t){e.categoryList=t.data.data}),n(),l(),e.removecard=function(a){e.updateCardDetailIndicator=!1,e.cardDetailIndicator=!1,e.creditCardDetailsIndicator=!1,o.loaderIndicator=!0,t.deleteCardDetails(a).then(function(t){"Card removed successfully!"==t.data.message&&(e.buttonIndicator=!0,o.loaderIndicator=!1)})},e.showCardDetails=function(){e.cardDetailIndicator=!0,e.buttonIndicator=!1,e.cardDetails={}},e.updateCardDetails=function(){e.updateCardDetailIndicator=!0,e.buttonIndicator=!1},e.cancelAddingCard=function(){e.buttonIndicator=!0,e.cardDetailIndicator=!1,e.updateCardDetailIndicator=!1},e.getProfilePicture=function(){$("#profilePopup").modal("show")},e.profilePopupClose=function(){$("#profilePopup").modal("hide")},e.accountSettings=function(){e.accountIndicator=!0,e.categoryIndicator=!1,e.mobileIndicator=!1,e.portfolioIndicator=!1,e.paymentIndicator=!1,e.passwordIndicator=!1,$(".singleSelection").select2(),e.successMobileIndicator=!1,e.insuranceIndicator=!1,e.paypal=!1},e.categorySettings=function(){e.accountIndicator=!1,e.categoryIndicator=!0,e.mobileIndicator=!1,e.portfolioIndicator=!1,e.paymentIndicator=!1,e.passwordIndicator=!1,e.successMobileIndicator=!1,e.insuranceIndicator=!1,e.paypal=!1,setTimeout(function(){$("#selectedCategories").select2({maximumSelectionLength:4})},0)},e.mobileSettings=function(){e.accountIndicator=!1,e.categoryIndicator=!1,e.mobileIndicator=!0,e.portfolioIndicator=!1,e.paymentIndicator=!1,e.passwordIndicator=!1,e.successMobileIndicator=!1,e.insuranceIndicator=!1,e.paypal=!1},e.portfolioSettings=function(){e.accountIndicator=!1,e.categoryIndicator=!1,e.mobileIndicator=!1,e.portfolioIndicator=!0,e.paymentIndicator=!1,e.passwordIndicator=!1,e.successMobileIndicator=!1,e.insuranceIndicator=!1,e.paypal=!1},e.paymentSettings=function(){e.accountIndicator=!1,e.categoryIndicator=!1,e.mobileIndicator=!1,e.portfolioIndicator=!1,e.paymentIndicator=!0,e.passwordIndicator=!1,e.successMobileIndicator=!1,e.insuranceIndicator=!1,e.paypal=!1},e.passwordSettings=function(){e.accountIndicator=!1,e.categoryIndicator=!1,e.mobileIndicator=!1,e.portfolioIndicator=!1,e.paymentIndicator=!1,e.passwordIndicator=!0,e.successMobileIndicator=!1,e.paypal=!1},e.showPaypal=function(){e.accountIndicator=!1,e.categoryIndicator=!1,e.mobileIndicator=!1,e.portfolioIndicator=!1,e.paymentIndicator=!1,e.passwordIndicator=!1,e.successMobileIndicator=!1,e.paypal=!0,e.insuranceIndicator=!1},e.insuranceSettings=function(){e.accountIndicator=!1,e.categoryIndicator=!1,e.mobileIndicator=!1,e.portfolioIndicator=!1,e.paymentIndicator=!1,e.passwordIndicator=!1,e.successMobileIndicator=!1,e.insuranceIndicator=!0,e.showInsuForm=!0,e.showQuaForm=!0,e.paypal=!1},e.updateAccountDetails=function(){var r=a.getUserid();e.user={},e.user.firstName=e.userDetails.first_name,e.user.lastName=e.userDetails.last_name,e.user.aboutMe=e.userDetails.about_me,e.user.email=e.userDetails.email,e.user.suburb=e.userDetails.suburb,e.user.state=e.userDetails.state,e.user.photo=e.userDetails.photo,e.user.verification_skills=e.userDetails.skill,e.dateErrorIndicator=!1,void 0==e.userDetails.day&&null==e.userDetails.day||e.userDetails.month&&e.userDetails.year||(e.dateErrorIndicator=!0),void 0==e.userDetails.month&&null==e.userDetails.month||e.userDetails.day&&e.userDetails.year||(e.dateErrorIndicator=!0),void 0==e.userDetails.year&&null==e.userDetails.year||e.userDetails.month&&e.userDetails.day||(e.dateErrorIndicator=!0),e.userDetails.day&&e.userDetails.month&&e.userDetails.year&&(e.dateErrorIndicator=!1,e.user.birthday=e.userDetails.day+"/"+e.userDetails.month+"/"+e.userDetails.year),o.loaderIndicator=!0,t.updateProfile(r,e.user).then(function(t){o.loaderIndicator=!1,"Profile updated successfully"==t.data.message&&(e.successMessageIndicator=!0,e.userDetails.first_name=t.data.data.first_name,e.userDetails.last_name=t.data.data.last_name,$("#settingsModal").modal({backdrop:"static"}),$("#settingsModal").modal({backdrop:"static",keyboard:!1},"show"),o.photo=e.userDetails.photo,setCookieValues("FirstName",e.userDetails.first_name),setCookieValues("Photo",o.photo))})},e.updateCategoryDetails=function(o){var r=a.getUserid();e.userDetails.category_id=o,t.updateProfile(r,e.userDetails).then(function(e){$("#categoryPopup").modal({backdrop:"static",keyboard:!1},"show")})},e.mobilePopupClose=function(){$("#mobilePopup").modal("hide")},e.categoryPopupClose=function(){$("#categoryPopup").modal("hide")},e.passwordPopupClose=function(){$("#passwordPopup").modal("hide")},e.portfolioPicturePopupClose=function(){$("#portfolioPicturePopup").modal("hide")},e.uploadPortfolioFiles=function(){var r=a.getUserid();e.userDetails.portfolio=[],e.userDetails.portfolio=e.portfolioImageArray,o.loaderIndicator=!0,t.updateProfile(r,e.userDetails).then(function(e){o.loaderIndicator=!1,$("#portfolioPopup").modal("show")})},e.portfolioPopupClose=function(){$("#portfolioPopup").modal("hide")},e.paypalPopupClose=function(){$("#paypalTaskModal").modal("hide")},e.settingsPopupClose=function(){$("#settingsModal").modal("hide")},e.paypalAccount=function(){var o=a.getUserid();t.updateProfile(o,e.userDetails).then(function(e){$("#paypalTaskModal").modal("show")})},o.$on("imageAdded",function(t,a,o){a&&"portFolioImage"==o&&e.portfolioImageArray&&(e.portfolioImageArray.length<5?(e.portfolioImageArray.push(a),setTimeout(function(){$("#portFolioImage").val("")},2e3)):(e.errorMessageIndicator=!0,e.messagePortfolio="Only five images are allowed for uploading."))}),e.updateMobileDetails=function(o){var r=a.getUserid();o.toString().length<=10&&t.updateProfile(r,e.userDetails).then(function(t){"Profile updated successfully"==t.data.message&&(e.successMobileIndicator=!0,$("#mobilePopup").modal("show"))})},e.updatePassword=function(i,s){if(s.$setSubmitted(!0),s.$valid)if(e.passwordDetails.cnfNewPassword===e.passwordDetails.newPassword){o.loaderIndicator=!0;var n=a.getUserid();t.changePassword(n,e.passwordDetails.oldPassword,e.passwordDetails.newPassword).then(function(t){500!=t.data.code&&"Password changed successfully."==t.data.message?(o.loaderIndicator=!1,$("#passwordPopup").modal("toggle"),$("#passwordPopup").modal({backdrop:"static"}),$("#passwordPopup").modal("show"),setTimeout(function(){r.path("/"),o.isLogin=!1,e.passwordDetails.oldPassword="",e.passwordDetails.newPassword="",e.passwordDetails.cnfNewPassword="",o.adminIndicator=!1,a.deleteCookieValues("FirstName"),a.deleteCookieValues("UserID"),a.deleteCookieValues("UserType"),a.reloadRoute(),$("#promptLoginPopup").modal("toggle"),$("#promptLoginPopup").modal({backdrop:"static"}),$("#promptLoginPopup").modal("show")},2e3)):(e.passwordIndicator=!0,o.loaderIndicator=!1,e.errorIndicator=!0,e.message=t.data.message)})}else e.message="New Password and Confirm new Password are not same.",e.errorIndicator=!0,e.passwordIndicator=!0;else e.message="Please enter required details",e.errorIndicator=!0},e.insuranceFileUpload=function(r,i){var s=document.getElementById("doc").files[0];e.imageIndidcator=!document.getElementById("doc").files[0],i.$setSubmitted(!0),i.$valid&&s?(reader=new FileReader,reader.readAsDataURL(s),reader.onload=function(){o.loaderIndicator=!0,e.insuranceDetails.userId=a.getUserid(),e.insuranceDetails.doc=reader.result,e.insuranceDetails.status="pending from admin",t.addInsurance(e.insuranceDetails).then(function(t){"Insurance added!"==t.data.message?(o.loaderIndicator=!1,e.showInsuForm=!1,i.$setPristine(),i.$setUntouched(),e.insuranceSuccessMessageIndicator=!0,e.insuranceErrorMessageIndicator=!1,e.insuranceMessage="This details will be saved to your profile after verification from our admin team.",e.insurancetList.push(t.data.data),e.showInsuDetail=!0,e.insuranceDetails={}):(o.loaderIndicator=!1,i.$setPristine(),i.$setUntouched(),e.insuranceSuccessMessageIndicator=!1,e.insuranceErrorMessageIndicator=!0,e.insuranceMessage=t.message,e.insuranceDetails={})})},reader.onerror=function(e){console.log("Error: ",e)}):(e.insuranceErrorMessageIndicator=!0,e.insuranceMessage="Please enter required details.")},e.addInsuranceForm=function(){e.showInsuForm=!0},e.addQualificationForm=function(){e.showQuaForm=!0},e.saveQualification=function(r,i){var s=document.getElementById("quaDoc").files[0];e.quaImageIndidcator=!document.getElementById("quaDoc").files[0],i.$setSubmitted(!0),i.$valid&&s?(reader=new FileReader,reader.readAsDataURL(s),reader.onload=function(r){var s=r.target.result;o.loaderIndicator=!0,e.qualificationDetails.userId=a.getUserid(),e.qualificationDetails.doc=s,e.qualificationDetails.status="pending from admin",t.addQualification(e.qualificationDetails).then(function(t){"Qualification added"==t.data.message?(o.loaderIndicator=!1,e.showQuaForm=!1,i.$setPristine(),i.$setUntouched(),e.quaSuccessMessageIndicator=!0,e.quaErrorMessageIndicator=!1,e.message="This details will be saved to your profile after verification from our admin team.",e.qualificationList.push(t.data.data),e.showQuaDetail=!0,e.qualificationDetails={}):(o.loaderIndicator=!1,i.$setPristine(),i.$setUntouched(),e.quaSuccessMessageIndicator=!1,e.quaErrorMessageIndicator=!0,e.message=t.message,e.qualificationDetails={})})},reader.onerror=function(e){console.log("Error: ",e)}):(e.quaErrorMessageIndicator=!0,e.message="Please enter required details.")},e.addCardDetails=function(r,i){if(i)if(i.$setSubmitted(!0),i.$valid){o.loaderIndicator=!0;var s=a.getUserid();r.userId=s,t.addCard(r).then(function(t){o.loaderIndicator=!1,"Card inserted successfully!"==t.data.message?(e.successMessageIndicator=!0,e.message="Card added successfully.",e.cardDetails={},e.errorMessageIndicator=!1,e.cardDetailIndicator=!1,e.updateCardDetailIndicator=!1,l()):"This card already added!"==t.data.message&&(e.message="This card already added!",e.errorMessageIndicator=!1)})}else e.errorMessageIndicator=!0,e.message="Please enter required details."},e.getPortfolioPicture=function(){$("#portfolioPicturePopup").modal("show")},e.deletePhoto=function(t){var a=e.portfolioImageArray.indexOf(t);e.portfolioImageArray.splice(a,1)}}]),app.controller("changePasswordCtrl",["$scope","$rootScope","commonService","CONSTANTS","httpService","$location",function(e,t,a,o,r,i){function s(t){t.$error.pattern?e.emailIndicator=!0:e.emailIndicator=!1}e.message="",e.successIndicator=!1,e.emailFormat=/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/,e.errorIndicator=!1,t.loaderIndicator=!1,e.passwordIndicator=!1,e.checkEmail=s,e.changePassword=function(s){if(e.resetForm.$setSubmitted(!0),e.resetForm.$valid)if(e.passwordIndicator=!1,e.cnfNewPassword===e.newPassword){t.loaderIndicator=!0;var n=a.getUserid();r.changePassword(n,e.oldPassword,e.newPassword).then(function(o){500!=o.data.code||"Password changed successfully."==o.data.message?(t.loaderIndicator=!1,e.oldPassword="",e.newPassword="",e.cnfNewPassword="",e.successIndicator=!0,a.deleteCookieValues("FirstName"),a.deleteCookieValues("UserID"),a.deleteCookieValues("UserType"),t.isLogin=!1,t.adminIndicator=!1,a.reloadRoute(),i.path("/"),$("#promptLoginPopup").modal("toggle"),$("#promptLoginPopup").modal({backdrop:"static"}),$("#promptLoginPopup").modal("show")):(t.loaderIndicator=!1,e.errorIndicator=!0,e.message="Something went wrong. Please try again after some time. ")})}else e.message="New Password and Confirm new Password are not same.",e.errorIndicator=!0,e.passwordIndicator=!0;else e.message=o.ERRORMESSAGE.REQUIREDFIELDERROR,e.errorIndicator=!0}}]),app.controller("paymentCtrl",["$scope","$rootScope","httpService","commonService",function(e,t,a,o){e.user={},e.transactionDetail={},e.emailFormat=/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/,e.errorMessageIndicator=!1,o.scrollToTop(),function(){e.montharray=[];for(var t=1;t<=12;t++){var a="";a=t>=1&&t<=9?"0"+t:t,e.montharray.push(a)}}(),function(){e.yeararray=[];for(var t=2018;t<=2035;t++)e.yeararray.push(t)}(),function(){t.loaderIndicator=!0;var r=o.getUserid();a.getTransaction(r).then(function(a){if("Transaction Found!"==a.data.message){t.loaderIndicator=!1,e.transactionDetail=a.data.data;for(var o=0;o<e.transactionDetail.length;o++)e.transactionDetail[o].transactionDetails=JSON.parse(e.transactionDetail[o].transactionDetails);e.transactionRecordIndicator=!0}else t.loaderIndicator=!1,e.transactionRecordIndicator=!1})}(),e.makePayment=function(){e.paymentForm.$setSubmitted(!0),e.paymentForm.$valid?(t.loaderIndicator=!0,e.user.userId="5",e.user.taskId="10",a.makePayment(e.user).then(function(a){t.loaderIndicator=!1,o.scrollToTop(),e.paymentForm.$setPristine(),e.paymentForm.$setUntouched(),e.successMessageIndicator=!0,e.errorMessageIndicator=!1,e.message="Payment done successfully.",e.user={}})):e.paymentForm.$error.required?(e.errorMessageIndicator=!0,e.message="Please enter required fields."):(e.errorMessageIndicator=!0,e.message="Something went wrong !!")}}]),app.controller("messagingCtrl",[function(){}]),app.controller("blogDetailCtrl",["$scope","$rootScope","httpService","commonService","$routeParams",function(e,t,a,o,r){t.loaderIndicator=!0,a.getAllBlogs().then(function(a){e.blogList=a.data.data,console.log(e.blogList);var o=r.blogTitle;if(o)for(var i=0;i<e.blogList.length;i++)o==e.blogList[i].blog_title&&(e.blog=e.blogList[i]);t.loaderIndicator=!1}),o.scrollToTop(),e.formatDate=function(e){return new Date(e)}}]);