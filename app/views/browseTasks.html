<style>
.disabled {
    cursor: not-allowed;
}
</style>
<div class="category-page">
    <div class="content-body">
        <div class="sub-banner">
            <div class="banner-overlay">
                <div class="heading">Browse Tasks</div>
            </div>
        </div>
        <div class="task-browse">
            <div class="container">
                <div class="row">
                    <h3>Go on, take a look! Show them what the pros can do.</h3>
                    <div class="col-sm-12">
                        <div class="search-bar">
                            <div class="inner-addon right-addon">
                                <i class="glyphicon glyphicon-search"></i>
                                <input type="text" placeholder="Search task by event name" class="form-control searchBar" data-ng-model="searchText" name="searchText" id="searchText">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="find-button">
            <div class="container">
                <div class="row">
                    <div class="col-sm-3 text-center">
                        <select class="selectpicker form-control" data-style="btn-primary" data-ng-model="eventTypeFilter" name="eventTypeFilter" id="eventTypeFilter">
                            <option value="">Filter By Event Type</option>
                            <option value="Wedding">Wedding</option>
                            <option value="Birthday">Birthday</option>
                            <option value="Graduation">Graduation</option>
                            <option value="High Tea">High Tea</option>
                            <option value="Corporate">Corporate</option>
                            <option value="Cocktail">Cocktail</option>
                            <option value="Anniversary">Anniversary</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="col-sm-3 text-center">
                        <select class="selectpicker form-control" data-ng-model="eventTypeCategory" data-style="btn-primary" name="category" id="category" ng-options="item.name as item.name for item in categoryList">
                            <option value="">Filter By Category</option>
                        </select>
                    </div>
                    <!--<div class="col-sm-3 text-center">
                <select class="selectpicker" data-style="btn-primary" name="budgetFilter" id="budgetFilter" data-ng-model="budgetFilter">
                    <option value="">Filter By Budget</option>
                    <option value="Per Person">Per Person</option>
                    <option value="Per Piece">Per Piece</option>
                    <option value="Total">Total</option>
                </select>
            </div>-->
                    <div class="col-sm-2 text-center">
                        <div class='input-group date'>
                            <input type='text' class="form-control" placeholder="Filter from event date" data-ng-model="fromDate" id="datetimepicker1" name="datetimepicker1" />
                            <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>
                    </div>
                    <div class="col-sm-2 text-center">
                        <div class='input-group date'>
                            <input type='text' class="form-control" placeholder="to this date" data-ng-model="toDate" id="datetimepicker2" name="datetimepicker2" />
                            <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>
                    </div>
                    <div class="col-sm-2 text-center">
                        <a data-ng-click="resetFilters()" class="btn btn-lg btn-primary">Reset Filters</a>
                    </div>
                </div>
                <div class="row" data-ng-if="!isLogin">
                    <div class="col-sm-12">
                        <p class="para-before-login">
                            Want to see what people are asking for? All you need to do is register for your free Event Bid account to start bidding for business!
                            <span><button data-ng-click="openSignupModal()">Sign Up</button>  <button data-ng-click="openLoginModal()">Login</button></span>
                            <!--<span><a href="#">Join</a> <a href="#">Login</a></span>-->
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="browse-list">
            <div class="container">
                <div class="per-card" data-ng-repeat="data in taskList | filter : {event_title : searchText, event_type : eventTypeFilter,
                category :{ name: eventTypeCategory},  category_question :{ costType: budgetFilter}}
                | filter : { date_required : getDataByDate()}">
                    <div class="per-card">
                        <a class="card-pop" data-ng-click="openSelectedtaskInDetail(data)">
                            <div class="card-table">
                                <div class="card--text">{{data.event_title}}</div>
                            </div>
                            <div class="card-table">
                                <img ng-src="{{data.category.categoryImage}}" alt="category image">
                            </div>
                            <div class="card-table">
                                <div class="card--text">{{data.event_type}}</div>
                            </div>
                            <div class="card-table">
                                <strong>Event date:</strong>
                                <br>{{data.date_required}}
                                <br><strong>From</strong> {{data.time_from}}
                                <br><strong>To</strong> {{data.time_to}}
                            </div>
                            <div class="card-table">
                                <div class="card--text" data-ng-if="data.category_question.totalCost"> {{data.category_question.totalCost | currency}}
                                    <br>{{data.category_question.costType}}</div>
                            </div>
                            <div class="card-table">
                                {{data.post_user_detail.first_name}}
                                <br><span><i class="glyphicon glyphicon-star"></i> <i class="glyphicon glyphicon-star"></i> <i class="glyphicon glyphicon-star"></i> <i class="glyphicon glyphicon-star"></i> <i class="glyphicon glyphicon-star"></i></span>
                                <br> task posted date: {{ formatDate(data.created_at) | date:'MM/dd/yyyy'}}
                            </div>
                        </a>
                    </div>
                </div>
                <div id="notFoundDiv" ng-show="(taskList | filter : {event_title : searchText, event_type : eventTypeFilter,
                category :{ name: eventTypeCategory},  category_question :{ costType: budgetFilter}}).length==0" style="color: red; font-weight: bold">No Records Found</div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-sm-12 text-center">
                    <!--<pagination ng-model="currentPage"
                        total-items="taskList.length"
                        max-size="maxSize"
                        boundary-links="true">
            </pagination>-->
                    <div class="col-sm-12" data-ng-show="(taskList | filter : {event_title : searchText, event_type : eventTypeFilter, date_required : dateFilter,
                category :{ name: eventTypeCategory},  category_question :{ costType: budgetFilter}}).length > 0">
                        <button id="seeMore" class="btn btn-lg btn-primary see-more-browse" data-ng-click="seeMoreClick()">See More</button>
                        <p id="noRecord" style="display:none">No more results found</p>
                    </div>
                    <br />
                    <br />
                </div>
            </div>
        </div>
        <!-- Modal -->
        <div id="taskDetailModal" class="modal browse-task-detail-pop fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">{{taskDetail.event_title}}</h4>
                    </div>
                    <div class="modal-body d-listing">
                        <div class="m-body-top">
                            <div class="d-left">
                                <p><b>Event Type </b> {{taskDetail.event_type}}</p>
                                <p><b>Category Name</b> {{taskDetail.category.name}}</p>
                                <p><b>Date Required</b> {{taskDetail.date_required }}</p>
                                <p><b>Time From</b> {{taskDetail.time_from}}</p>
                                <p><b>Time To</b> {{taskDetail.time_to}}</p>
                            </div>
                            <div class="d-right"><img ng-src="{{taskDetail.category.categoryImage}}" alt="category image"></div>
                        </div>
                        <div class="event-detail-pop m-body-mid">
                            <ul>
                                <li ng-repeat="(key, val) in taskDetail.category_Detail">
                                    <div data-ng-if="key == 'Desert Images for reference' || key =='Graphic images' ">
                                        <div data-ng-if="val.length > 0" data-ng-repeat="data in val track by $index">
                                            <img class="uploaded-image" ng-src="{{data}}" width="100" height="50" alt="Image preview..." id="inspirationPhoto">
                                        </div>
                                    </div>
                                    <div class="left-list" data-ng-if="key != 'Desert Images for reference' && key !='Graphic images'">
                                        <b> {{key}}</b> <span> {{val}}</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="m-body-bottom">
                            <p>
                                <b>Task Posted by :</b>
                                <br />
                                <b>name : </b> {{taskDetail.post_user_detail.first_name}}</br>
                                <b> rating : </b> {{taskDetail.post_user_detail.rating}}
                                <span><i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i></span>
                                </br>
                                <b>  Task posted date : </b> {{ formatDate(taskDetail.created_at) | date:'dd/MM/yyyy'}}
                            </p>
                            <div class="comment-box-browse">
                                <div class="comment-head">
                                    <div class="header-comment">
                                        <div class="line"></div>
                                        <div class="title interactive">{{countIndicator}} comments about this Task</div>
                                    </div>
                                    <p class="comment-para">
                                        Comment below for more details and remember that for your safety, not to share personal information e.g. email and phone numbers.
                                    </p>
                                </div>
                                <div class="commenter">
                                    <div class="commenter-pic">
                                        <a href="#"><img src="app/images/profile-btn.png" alt="user"></a>
                                    </div>
                                    <div class="commenter-text">
                                        <textarea value="Ask a question" data-ng-model="commentDescription" name="description" data-ng-change="addCommentChange()"></textarea>
                                        <p class="comment-footer">
                                            <!--<span><a href="#"><i class="fa fa-cloud-upload" aria-hidden="true"></i></a></span>-->
                                            <span>
                                        <a data-ng-click="addComment()" ng-class="{disabled : anchorDisable}"
                                           ng-style="{'color': anchorDisable  ? 'grey' : 'black' }">Send</a>
                                    </span>
                                        </p>
                                    </div>
                                </div>
                                <div class="commenter" data-ng-repeat="item in commentList">
                                    <div id="commentItem" data-ng-if="item.commentId == 0">
                                        <div class="commenter-pic">
                                            <a href="#"><img src="app/images/profile-btn.png" alt="yellotasker"></a>
                                        </div>
                                        <div class="commenter-text">
                                            <h4><a href="#">{{item.user_detail.first_name}} {{item.user_detail.last_name}}</a></h4>
                                            <p class="commenter-desc">
                                                {{item.commentDescription}}
                                            </p>
                                            <p class="timing-reply"><span>{{item.created_at | timeago }}</span> <span><a data-ng-click="onReply(item)"><i class="fa fa-reply"></i> Reply</a></span></p>
                                        </div>
                                    </div>
                                    <div style="display: none" id="item_{{item.id}}">
                                        <div class="commenter-pic">
                                            <a href="#"><img src="app/images/profile-btn.png" alt="yellotasker"></a>
                                        </div>
                                        <div class="commenter-text">
                                            <textarea value="Ask a question" data-ng-model="replyCommentDesc" name="replyDescription" data-ng-change="addCommentReplyChange(replyCommentDesc)"></textarea>
                                            <p class="comment-footer">
                                                <span>
                                            <a data-ng-click="replyComment(replyCommentDesc, item.id)"
                                               ng-class="{disabled : anchorReplyDisable}"
                                               ng-style="{'color': anchorReplyDisable  ? 'grey' : 'black' }">Send</a>
                                        </span>
                                            </p>
                                        </div>
                                    </div>
                                    <div>
                                        <!--reply list div starts-->
                                        <div data-ng-if="checkIfReplyExists(item.id, commentList)">
                                            <!--reply list div starts-->
                                            <div data-ng-repeat="data in repliedObjectList">
                                                <div class="commenter sub-reply">
                                                    <div class="commenter-pic">
                                                        <a href="#"><img src="app/images/profile-btn.png" alt="yellotasker"></a>
                                                    </div>
                                                    <div class="commenter-text">
                                                        <h4><a href="#">{{data.user_detail.first_name}} {{data.user_detail.last_name}}</a></h4>
                                                        <p class="commenter-desc thanks-posting">{{data.commentDescription}}</p>
                                                        <p class="timing-reply">
                                                            <span>{{data.created_at | timeago }}</span> <span>
                                                        <a data-ng-click="onReply(data)"><i class="fa fa-reply"></i> Reply</a>
                                                    </span>
                                                        </p>
                                                    </div>
                                                </div>
                                                <div style="display: none" id="item_{{data.id}}">
                                                    <div class="commenter-pic">
                                                        <a href="#"><img src="app/images/profile-btn.png" alt="yellotasker"></a>
                                                    </div>
                                                    <div class="commenter-text">
                                                        <textarea value="Ask a question" data-ng-model="replyCommentDesc" name="replyDescription" data-ng-change="addCommentReplyChange(replyCommentDesc)"></textarea>
                                                        <p class="comment-footer">
                                                            <span>
                                                        <a data-ng-click="replyComment(replyCommentDesc, item.id)"
                                                           ng-class="{disabled : anchorReplyDisable}"
                                                           ng-style="{'color': anchorReplyDisable  ? 'grey' : 'black' }">Send</a>
                                                    </span>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--reply list div ends-->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-ng-click="showInterestPopup()">Place your bid</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="showInterestPopup" tabindex="-1">
            <div class="eb-vAlignment">
                <div class="modal-dialog eb-vAlignCenter">
                    <div class="modal-content">
                        <div class="eb-modal-header">
                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title">{{taskDetail.event_title}}</h4>
                        </div>
                        <div class="modal-body">
                            <form name="showInterestForm" id="showInterestForm" novalidate class="signupform">
                                <div data-ng-if="errorMessage" class="alert alert-danger">
                                    Please enter required details
                                </div>
                                <div>
                                    <b> Offer cost</b>
                                    <input type="number" class="form-control" ng-model="interestedUser.offerCost" name="offerCost" required placeholder="In $" ng-class="{error : showInterestForm.offerCost.$invalid && showInterestForm.$submitted}">
                                </div>
                                <div>
                                    <b>Offer type</b>
                                    <select class="selectpicker" data-style="btn-primary" required name="offerType" id="offerType" data-ng-model="interestedUser.showInterestCostType" ng-class="{error : offerType.$invalid}">
                                        <option value="">Filter By Budget</option>
                                        <option value="Per Person">Per Person</option>
                                        <option value="Per Piece">Per Piece</option>
                                        <option value="Total">Total</option>
                                    </select>
                                </div>
                                <div class="comment-box-browse">
                                    <div class="commenter">
                                        <b>Please comment on your offer : </b>
                                        <div class="commenter-text full-text-area">
                                            <textarea value="Ask a question" data-ng-model="interestedUser.commentDescription" name="description" required ng-class="{error : showInterestForm.description.$invalid && showInterestForm.$submitted}"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <label>Upload photos (upto 3 photos )</label>
                                        <input type="file" class="form-control" name="offerImages" id="offerImages" fileread="offerImages" image-type="offerImages" accept="image/*" data-ng-model="offerImages" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div data-ng-if="interestedUser.offerImages.length > 0">
                                            <div class="uploadedImage" data-ng-repeat="data in interestedUser.offerImages track by $index">
                                                <a class="right-cross" data-ng-click="deletePhoto(data)">X</a>
                                                <img class="uploaded-image" ng-src="{{data}}" width="100" height="50" alt="Image preview..." id="inspirationPhoto">
                                            </div>
                                            <div class="show-more-btn">
                                                <input type="button" value="show Image Preview" data-ng-click="showOfferImagesPreview()" />
                                            </div>
                                        </div>
                                        <div data-ng-if="interestedUser.offerImages.length == 0">
                                            <!--<img ng-src="{{offerImages}}" width="100" height="50" alt="Image preview..." id="categoryImage">-->
                                            no images uploaded yet.
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div data-ng-if="errorMessageIndicator" class="alert alert-danger">
                                        {{message}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <button type="button" class="btn btn-default place-yr-bid" data-ng-click="showInterest(taskDetail)">
                                            Place your bid
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Offer images pop up  -->
        <div class="modal fade" id="offerImagesPopup" tabindex="-1">
            <div class="eb-vAlignment">
                <div class="modal-dialog eb-vAlignCenter">
                    <div class="modal-content">
                        <div class="eb-modal-header">
                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                            <h3 class="modal-title">Offer Images preview</h3>
                        </div>
                        <div class="modal-body">
                            <div class="extraSpace"></div>
                            <div class="popup-form-row">
                                <div class="row">
                                    <div data-ng-if="interestedUser.offerImages.length > 0" data-ng-repeat="data in interestedUser.offerImages track by $index">
                                        <a class="right-cross" data-ng-click="deletePhoto(data)">X</a>
                                        <img class="uploaded-image" ng-src="{{data}}" alt="Image preview..." id="inspirationPhoto">
                                    </div>
                                </div>
                            </div>
                            <div class="text-center">
                                <a class="btn btn-primary" data-ng-click="offerImagesPopupClose()">Close</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--add paypal account -->
        <div class="modal browse-task-detail-pop fade" id="addPaypalAccountPopup" tabindex="-1">
            <div class="">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">
                                <span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title ng-binding">Please add paypal account</h4>
                        </div>
                        <div class="modal-body" style="background:#fff;">
                            <div class="alert alert-danger" data-ng-show="emailIndicator">
                                Please enter valid email address.
                            </div>
                            <div class="add-account-paypal">
                                <p>Email</p>
                                <input type="email" required placeholder="enter your email" data-ng-model="userDetails.paypalAccount">
                            </div>
                        </div>
                        <div class="modal-footer" style="margin-top:0px;">
                            <button type="button" class="btn btn-default" data-ng-click="paypalAccount()">Add Account</button>
                            <button type="button" class="btn btn-default" data-ng-click="closePaypal()">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>